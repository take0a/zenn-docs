---
title: "Golangã§MySQL"
emoji: "ğŸ¬"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["golang", "sqlx", "sql", "database", "mysql"]
published: false
publication_name: "robon"
---
# ã¯ã˜ã‚ã«

å‰å›ã¯ã€Golangã§PostgreSQLã®å„ç¨®ãƒ‡ãƒ¼ã‚¿å‹ã®å…¥å‡ºåŠ›ã‚’æ¤œè¨¼ã—ã¾ã—ãŸã€‚

https://zenn.dev/robon/articles/9d6ba760a74b89

ä»Šå›ã¯ã€MySQL ã‚’è©•ä¾¡ã—ã¾ã™ã€‚

# MySQL
## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

Amazon RDS ä¸Šã«æ§‹ç¯‰ã—ãŸ MySQL ã‚µãƒ¼ãƒãƒ¼ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

| è¨­å®š | å€¤ |
|---|---|
| ã‚¨ãƒ³ã‚¸ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | 8.0.28 |
| ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¯ãƒ©ã‚¹ | db.t3.micro |
| vCPU | 2 |
| RAM | 1GB |
| ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ | 20GiB |

## ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

Amazon EC2 ã® Amazon Linux 2 ã‹ã‚‰æ¥ç¶šã—ã¾ã™ã€‚

### ãƒ„ãƒ¼ãƒ«

mysql ã‚’ä½¿ç”¨ã—ã¾ã™ã®ã§ã€Amazon Linux 2 ã®å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
```
$ sudo yum install mariadb
```

## ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ†ãƒ¼ãƒ–ãƒ«
### ãƒ‡ãƒ¼ã‚¿å‹ã®ä¸€è¦§

[ãƒãƒ‹ãƒ¥ã‚¢ãƒ«](https://dev.mysql.com/doc/refman/8.0/ja/data-types.html) ã‹ã‚‰æŠœç²‹ã—ã¾ã™ã€‚

| åç§° | åˆ¥å | èª¬æ˜ |
|------|-----|------|
| tinyint |  | 1byteæ•´æ•° |
| smallint |  | 2byteæ•´æ•° |
| mediumint |  | 3byteæ•´æ•° |
| int |  | 4byteæ•´æ•° |
| bigint |  | 8byteæ•´æ•° |
| decimal | numeric | å›ºå®šå°æ•°ç‚¹æ•° |
| float |  | 4byteæµ®å‹•å°æ•°ç‚¹æ•° |
| double |  | 8byteæµ®å‹•å°æ•°ç‚¹æ•° |
| bit |  | ãƒ“ãƒƒãƒˆå€¤ |
| date |  | æ—¥ä»˜ |
| datetime |  | æ—¥æ™‚ |
| timestamp |  | UNIXã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ— |
| time |  | æ™‚é–“å€¤ |
| year |  | å¹´ï¼ˆ1901ï½2155ï¼‰ |
| char |  | å›ºå®šé•·æ–‡å­—åˆ— |
| varchar |  | å¯å¤‰é•·æ–‡å­—åˆ— |
| binary |  | å›ºå®šé•·byteåˆ— |
| varbinary |  | å¯å¤‰é•·byteåˆ— |
| tinyblob |  | binary large object å¤§ãã•é † |
| blob |  |  |
| mediumblob |  |  |
| longblob |  |  |
| tinytext |  | character large object å¤§ãã•é † |
| text |  |  |
| mediumtext |  |  |
| longtest |  |  |
| enum |  | åˆ—æŒ™ |
| set |  | é›†åˆ |
| geometry |  | pointã‹linestringã‹polygon |
| point |  | åº§æ¨™ |
| linestring |  | ç›´ç·šã§ä¿ç®¡ã•ã‚Œã‚‹åº§æ¨™ã®åˆ— |
| polygon |  | å˜ç´”ã‹ã¤é–‰ã˜ãŸlinestring |
| multipoint |  | pointã®åˆ— |
| multilinestring |  | linestringã®åˆ— |
| multipolygon |  | polygonã®åˆ— |
| geometrycollection |  | geometryã®åˆ— |
| json |  | JSONæ–‡å­—åˆ— |


### ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ†ãƒ¼ãƒ–ãƒ«

ãã®ã¾ã¾ CREATE TABLEæ–‡ã«ã—ã¾ã™ã€‚

```sql
```

# Golang
## å‡¦ç†ç³»
```bash
$ go version
go version go1.18.6 linux/amd64
```

## ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

github.com/lib/pq ã® v1.10.9 ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿å‹ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®ä»•æ§˜ã§ã¤ãã‚‰ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

https://github.com/lib/pq/blob/master/doc.go#L129-L146

## ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾ã—ã¦å…¥å‡ºåŠ›ã‚’è¡Œã†ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã—ã¾ã™ã€‚æ­¯æŠœã‘ã®çŠ¶æ…‹ã‹ã‚‰å¾ã€…ã«åŸ‹ã‚ã¦ã„ã‘ã‚‹ã‚ˆã†ã«ã€Nullable å‹ã§å…¥å‡ºåŠ›ã—ã¾ã™ã€‚

```go: main.go
```

# ãŠã‚ã‚Šã«


æ—¥æœ¬èªã«ã¤ã„ã¦ã¯ã€åˆ¥é€”ã€ãƒ†ã‚¹ãƒˆã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚
