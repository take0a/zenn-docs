---
title: "GolangでMySQL"
emoji: "🐬"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["golang", "sqlx", "sql", "database", "mysql"]
published: false
publication_name: "robon"
---
# はじめに

前回は、GolangでPostgreSQLの各種データ型の入出力を検証しました。

https://zenn.dev/robon/articles/9d6ba760a74b89

今回は、MySQL を評価します。

# MySQL
## データベース

Amazon RDS 上に構築した MySQL サーバーを使用します。

| 設定 | 値 |
|---|---|
| エンジンバージョン | 8.0.28 |
| インスタンスクラス | db.t3.micro |
| vCPU | 2 |
| RAM | 1GB |
| ストレージ | 20GiB |

## クライアント

Amazon EC2 の Amazon Linux 2 から接続します。

### ツール

mysql を使用しますので、Amazon Linux 2 の場合は、以下のようにインストールします。
```
$ sudo yum install mariadb
```

## テスト用のテーブル
### データ型の一覧

[マニュアル](https://dev.mysql.com/doc/refman/8.0/ja/data-types.html) から抜粋します。

| 名称 | 別名 | 説明 |
|------|-----|------|
| tinyint |  | 1byte整数 |
| smallint |  | 2byte整数 |
| mediumint |  | 3byte整数 |
| int |  | 4byte整数 |
| bigint |  | 8byte整数 |
| decimal | numeric | 固定小数点数 |
| float |  | 4byte浮動小数点数 |
| double |  | 8byte浮動小数点数 |
| bit |  | ビット値 |
| date |  | 日付 |
| datetime |  | 日時 |
| timestamp |  | UNIXタイムスタンプ |
| time |  | 時間値 |
| year |  | 年（1901～2155） |
| char |  | 固定長文字列 |
| varchar |  | 可変長文字列 |
| binary |  | 固定長byte列 |
| varbinary |  | 可変長byte列 |
| tinyblob |  | binary large object 大きさ順 |
| blob |  |  |
| mediumblob |  |  |
| longblob |  |  |
| tinytext |  | character large object 大きさ順 |
| text |  |  |
| mediumtext |  |  |
| longtest |  |  |
| enum |  | 列挙 |
| set |  | 集合 |
| geometry |  | pointかlinestringかpolygon |
| point |  | 座標 |
| linestring |  | 直線で保管される座標の列 |
| polygon |  | 単純かつ閉じたlinestring |
| multipoint |  | pointの列 |
| multilinestring |  | linestringの列 |
| multipolygon |  | polygonの列 |
| geometrycollection |  | geometryの列 |
| json |  | JSON文字列 |


### テスト用のテーブル

そのまま CREATE TABLE文にします。

```sql
```

# Golang
## 処理系
```bash
$ go version
go version go1.18.6 linux/amd64
```

## ライブラリ

github.com/lib/pq の v1.10.9 を使用します。データ型については、以下の仕様でつくられているようです。

https://github.com/lib/pq/blob/master/doc.go#L129-L146

## アプリケーション

テスト用のテーブルに対して入出力を行うアプリケーションを実装します。歯抜けの状態から徐々に埋めていけるように、Nullable 型で入出力します。

```go: main.go
```

# おわりに


日本語については、別途、テストしたいと思います。
