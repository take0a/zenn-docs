---
title: "VSCode拡張開発メモ"
emoji: "📘"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["vscode", "typescript"]
published: false
publication_name: "robon"
---
# はじめに
「[VSCodeでSQLMesh](https://zenn.dev/robon/articles/2cca1898b60468)」で、SQLMesh の VSCode 拡張を確認して、ソースコードもあるし、拡張を拡張しちゃうぞ。と思ったのですが、ソースコードの気持ちが全くわからず…。ということで、ネットにたくさんある VSCode 拡張の作り方の Yet Another なんとかですが、できるだけ最新の公式から。

# [概要](https://code.visualstudio.com/api)
## 拡張機能でできること(の例)
- VS Code の外観を色やファイルアイコンのテーマで変更する - [Theming](https://code.visualstudio.com/api/extension-capabilities/theming)
- UI にカスタム コンポーネントとビューを追加する - [ワークベンチの拡張](https://code.visualstudio.com/api/extension-capabilities/extending-workbench)
- HTML/CSS/JS で構築されたカスタム Web ページを表示する Webview を作成する - [Webview ガイド](https://code.visualstudio.com/api/extension-guides/webview)
- 新しいプログラミング言語のサポート - [言語拡張の概要](https://code.visualstudio.com/api/language-extensions/overview)
- 特定のランタイムのデバッグをサポートする - [デバッガー拡張ガイド](https://code.visualstudio.com/api/extension-guides/debugger-extension)

# [拡張機能の概要](https://code.visualstudio.com/api/extension-capabilities/overview)
## [共通機能](https://code.visualstudio.com/api/extension-capabilities/common-capabilities)（の例）
- コマンド、構成、キーバインド、またはコンテキスト メニュー項目を登録します。
    - `vscode.commands` APIを使用してコマンドを登録および実行します。
    - `contributes.commands` コントリビューション ポイントを使用して、コマンド パレットでコマンドを使用できるようにします。
    - `contributes.configuration` コントリビューション ポイント を使用して拡張機能固有の設定を提供します。
    - `workspace.getConfiguration` API を使用してそれらを読み取ることができます。
    - カスタムキーバインドを追加できます。詳しくは、`contributes.keybindings` と[キーバインド](https://code.visualstudio.com/docs/getstarted/keybindings)のトピックをご覧ください。
    - 右クリックすると表示されるカスタムコンテキストメニュー項目を登録できます。詳しくは、`contributes.menus` コントリビューション ポイント をご覧ください。
- ワークスペースまたはグローバル データの保存。
    - `ExtensionContext.workspaceState`: キーと値のペアを書き込むことができるワークスペースストレージ。VS Code がこのストレージを管理し、同じワークスペースを再度開いたときに復元します。
    - `ExtensionContext.globalState`: キー/値のペアを書き込めるグローバルストレージです。VS Code はこのストレージを管理し、拡張機能のアクティベーションごとに復元します。`globalState` の `setKeysForSync` メソッド のを使って同期対象のキーを設定することで、グローバルストレージ内のキー/値のペアを選択的に同期できます。
    - `ExtensionContext.storageUri`: 拡張機能が読み取り/書き込み権限を持つローカルディレクトリを指す、ワークスペース固有のストレージURI。現在のワークスペースからのみアクセス可能な大きなファイルを保存する必要がある場合に適しています。
    - `ExtensionContext.globalStorageUri`: 拡張機能が読み取り/書き込み権限を持つローカルディレクトリを指すグローバルストレージURI。これは、すべてのワークスペースからアクセスできる大きなファイルを保存する必要がある場合に適したオプションです。
    - `ExtensionContext.secrets`: シークレット（または機密情報）を暗号化して保存するグローバルストレージ。これらの情報はマシン間で同期されません。VS Codeデスクトップ版では、Electron の [safeStorage API](https://www.electronjs.org/docs/latest/api/safe-storage) を活用します。VS Code for the Webでは、Double Key Encryption（DKE）実装を使用します。
- 通知メッセージを表示します。
    - [`window.showInformationMessage`](https://code.visualstudio.com/api/references/vscode-api#window.showInformationMessage)
    - [`window.showWarningMessage`](https://code.visualstudio.com/api/references/vscode-api#window.showWarningMessage)
    - [`window.showErrorMessage`](https://code.visualstudio.com/api/references/vscode-api#window.showErrorMessage)
- クイックピックを使用してユーザー入力を収集します。
    - `vscode.QuickPick` APIを使用すると、ユーザー入力を簡単に収集したり、複数のオプションから選択させたりすることができます。
- システム ファイル ピッカーを開いて、ユーザーがファイルまたはフォルダーを選択できるようにします。
    - `window.showOpenDialog` API を使用してシステム ファイル ピッカーを開き、ファイルまたはフォルダーを選択できます。
- 長時間実行される操作を示すには、Progress API を使用します。
    - `vscode.Progress` APIを使用して、ユーザーに進捗状況の更新を報告できます。

## [テーマ設定](https://code.visualstudio.com/api/extension-capabilities/theming)（の例）
- ソースコードの色を変更します。
    - `tokenColors` は、エディタ内でのハイライト表示の色とスタイルを定義します。このトピックに関する詳細は、[構文ハイライトガイド](https://code.visualstudio.com/api/language-extensions/syntax-highlight-guide)をご覧ください。
    - `semanticTokenColors` マッピングと `semanticHighlighting` 設定により、エディターでのハイライト表示を強化できます。[セマンティックハイライトガイド](https://code.visualstudio.com/api/language-extensions/semantic-highlight-guide)では、関連するAPIについて説明しています。
- VS Code UI の色を変更します。
    - UI コンポーネントの色を制御する `colors` マッピング。
- 既存の TextMate テーマを VS Code に移植します。
- カスタム ファイル アイコンを追加します。
    - 一意のファイル アイコン識別子から画像またはフォント アイコンへのマッピングを作成します。
    - ファイル名またはファイル言語の種類によって、ファイルをこれらの一意のファイル アイコン識別子に関連付けます。

## 宣言型言語機能（の例）
- 一般的な JavaScript スニペットを拡張機能にバンドルします。
- VS Code に新しいプログラミング言語について伝えます。
- プログラミング言語の文法を追加または置き換えます。
- 文法注入を使用して既存の文法を拡張します。
- 既存の TextMate 文法を VS Code に移植します。

## プログラム言語機能（の例）
- API の使用例を表示するホバーを追加します。
- 診断を使用して、ソース コード内のスペルまたはリンター エラーを報告します。
- HTML 用の新しいコード フォーマッタを登録します。
- 豊富でコンテキストに応じた IntelliSense を提供します。
- 言語に折りたたみ、パンくずリスト、アウトラインのサポートを追加します。

## [ワークベンチ拡張機能](https://code.visualstudio.com/api/extension-capabilities/extending-workbench)（の例）
- ファイル エクスプローラーにカスタム コンテキスト メニュー アクションを追加します。
- サイド バーに新しいインタラクティブな TreeView を作成します。
    - [`contributes.views`](https://code.visualstudio.com/api/references/contribution-points#contributes.views) コントリビューションポイントを使用すると、任意のビューコンテナに表示される新しいビューを追加できます。
- 新しいアクティビティ バー ビューを定義します。
- ステータス バーに新しい情報を表示します。
    - [StatusBarItem](https://code.visualstudio.com/api/references/vscode-api#StatusBarItem) 拡張機能は、ステータスバーに表示されるカスタム項目を作成できます。
- WebView APIを使用してカスタム コンテンツをレンダリングします。
    - Webview は、HTML/CSS/JavaScript で構築された高度にカスタマイズ可能なビューです。エディターグループ領域では、テキストエディターの横に表示されます。Webview の詳細については、[Webview ガイド](https://code.visualstudio.com/api/extension-guides/webview)をご覧ください。
- ソース管理プロバイダーに貢献します。

## デバッグ（の例）
- デバッグ アダプターの実装を提供することで、VS Code のデバッグ UI をデバッガーまたはランタイムに接続します。
- デバッガー拡張機能でサポートされる言語を指定します。
- デバッガーによって使用されるデバッグ構成属性に関する豊富な IntelliSense とホバー情報を提供します。
- デバッグ構成スニペットを提供します。

- 動的に作成されたデバッグ構成に基づいてデバッグ セッションを開始します。
- デバッグ セッションのライフサイクルを追跡します。
- プログラムでブレークポイントを作成および管理します。

## 制限
- 拡張機能はVS Code UIのDOMにアクセスできません。
- ユーザーまたは拡張機能によって提供されるカスタム スタイル シートは、DOM 構造とクラス名に対して機能します。

# Get Started（もしくは Hello world）
## [Your First Extension](https://code.visualstudio.com/api/get-started/your-first-extension)
### 事前準備
git と node をインストールします。今回は Windows でやるので、[git for Windows](https://gitforwindows.org/) と [nvm-windows](https://github.com/coreybutler/nvm-windows) を入れます。

nvm は、git bash で以下のようにして、node や npm や npx が使えるようにします。
```
$ nvm install lts
Downloading node.js version 22.20.0 (64-bit)... 
Extracting node and npm...
Complete
Installation complete.
If you want to use this version, type:

nvm use 22.20.0

$ nvm use 22.20.0
Now using node v22.20.0 (64-bit)
```

### VSCode拡張プロジェクト構築
サイトに書いてあるとおりですが、
```
$ npx --package yo --package generator-code -- yo code

     _-----_     ╭──────────────────────────╮
    |       |    │   Welcome to the Visual  │
    |--(o)--|    │   Studio Code Extension  │
   `---------´   │        generator!        │
    ( _´U`_ )    ╰──────────────────────────╯
    /___A___\   /
     |  ~  |
   __'.___.'__
 ´   `  |° ´ Y `

? What type of extension do you want to create? (Use arrow keys)
❯ New Extension (TypeScript)
  New Extension (JavaScript)
  New Color Theme
  New Language Support
  New Code Snippets
  New Keymap
  New Extension Pack
  New Language Pack (Localization)
  New Web Extension (TypeScript)
  New Notebook Renderer (TypeScript) 
```
こんな感じで止まるので、選択肢や入力候補の出てるやつは、以下のようになるように `Enter` していきます。
```
? What type of extension do you want to create? New Extension (TypeScript)
? What's the name of your extension? HelloWorld
? What's the identifier of your extension? helloworld
? What's the description of your extension? 
? Initialize a git repository? Yes
? Which bundler to use? unbundled
? Which package manager to use? npm

Writing in C:\Users\araki\workspace\vscode-ext\helloworld...
   create helloworld\.vscode\extensions.json
   create helloworld\.vscode\launch.json
   create helloworld\.vscode\settings.json
   create helloworld\.vscode\tasks.json
   create helloworld\package.json
   create helloworld\tsconfig.json
   create helloworld\.vscodeignore
   create helloworld\vsc-extension-quickstart.md
   create helloworld\.gitignore
   create helloworld\README.md
   create helloworld\CHANGELOG.md
   create helloworld\src\extension.ts
   create helloworld\src\test\extension.test.ts
   create helloworld\.vscode-test.mjs
   create helloworld\eslint.config.mjs

Changes to package.json were detected.

Running npm install for you to install the required dependencies.
npm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported

added 259 packages, and audited 260 packages in 35s

74 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

Your extension helloworld has been created!

To start editing with Visual Studio Code, use the following commands:

     code helloworld

Open vsc-extension-quickstart.md inside the new extension for further instructions
on how to modify, test and publish your extension.

For more information, also visit http://code.visualstudio.com and follow us @code.


? Do you want to open the new folder with Visual Studio Code? Open with `code`
```
最後で `Opwn with code` と VSCode が helloworld フォルダを開いて起動します。起動した VSCode で `src/extension.ts` を開いて、デバックパネルでデバック実行 `Run Extension` します。そうすると、もう一つ VSCode が Hello World 拡張入りで起動しますので、`Shift + Ctrl + P` から `Hello World` を選びます。

![](/images/a8ef580909c553/hello.png)

サイトの記載は、そうすると、こうなりますよ。という意味です。

![](/images/a8ef580909c553/hello2.png)

メッセージの変更はコピペすれば OK。`Developer: Reload Window` は、現時点では、`Developer: Reload Webview`（開発者：Webビューの再読み込み）になっていました。

## [Extension Anatomy](https://code.visualstudio.com/api/get-started/extension-anatomy)
記述された対象のバージョンが古いと内容が変わるので、注意が必要です。以下を探しても見つかりません。
> Registers the onCommand Activation Event: onCommand:helloworld.helloWorld, so the extension becomes activated when user runs the Hello World command.

で、今回生成されたものを添付します。

```json: package.json
{
  "name": "helloworld",
  "displayName": "HelloWorld",
  "description": "",
  "version": "0.0.1",
  "engines": {
    "vscode": "^1.104.0"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [],
  "main": "./out/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "helloworld.helloWorld",
        "title": "Hello World"
      }
    ]
  },
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./",
    "pretest": "npm run compile && npm run lint",
    "lint": "eslint src",
    "test": "vscode-test"
  },
  "devDependencies": {
    "@types/vscode": "^1.104.0",
    "@types/mocha": "^10.0.10",
    "@types/node": "22.x",
    "@typescript-eslint/eslint-plugin": "^8.42.0",
    "@typescript-eslint/parser": "^8.42.0",
    "eslint": "^9.34.0",
    "typescript": "^5.9.2",
    "@vscode/test-cli": "^0.0.11",
    "@vscode/test-electron": "^2.5.2"
  }
}
```

- `name` および `publisher`: VS Code は `<publisher>.<name>` を拡張機能の一意の ID として使用します。例えば、Hello World サンプルの ID は `vscode-samples.helloworld-sample` です。VS Code はこの ID を使用して拡張機能を一意に識別します。
- `main`: 拡張機能のエントリーポイント。
- `activationEvents` および `contributes`: [アクティベーションイベント](https://code.visualstudio.com/api/references/activation-events)（拡張機能がアクティブになるイベント）と[貢献ポイント](https://code.visualstudio.com/api/references/contribution-points)（VSCode のどこを拡張するのか）。
- `engines.vscode`: これは、拡張機能が依存する VS Code API の最小バージョンを指定します。

[Your First Extension](#your-first-extension) の演習でメッセージを変更して後のものです。ポイントはコメントのとおりなので、翻訳しました。

```ts: src/extension.ts
// モジュール「vscode」には VS Code 拡張 API が含まれています
// モジュールをインポートし、以下のコードでエイリアス vscode を使用して参照します
import * as vscode from 'vscode';

// このメソッドは拡張機能がアクティブ化されたときに呼び出されます
// 拡張機能はコマンドが最初に実行されたときにアクティブ化されます
export function activate(context: vscode.ExtensionContext) {

	// コンソールを使用して、診断情報 (console.log) とエラー (console.error) を出力します。
	// このコード行は、拡張機能が有効化されたときに一度だけ実行されます。
	console.log('Congratulations, your extension "helloworld" is now active!');

	// コマンドはpackage.jsonファイルで定義されています
	// 次に、registerCommandを使用してコマンドの実装を指定します
	// commandIdパラメータは、package.jsonのcommandフィールドと一致する必要があります
	const disposable = vscode.commands.registerCommand('helloworld.helloWorld', () => {
		// ここに記述したコードは、コマンドが実行されるたびに実行されます。
		// ユーザーにメッセージボックスを表示します
		vscode.window.showInformationMessage('Hello VS Code');
	});

	context.subscriptions.push(disposable);
}

// このメソッドは拡張機能が非アクティブ化されたときに呼び出されます
export function deactivate() {}
```

## [Wrapping Up](https://code.visualstudio.com/api/get-started/wrapping-up)
ここは、Get Started 以外の各章の概要が書いてあります。

# [拡張ガイド](https://code.visualstudio.com/api/extension-guides/overview)

| Guide on VS Code Website | 一言メモ |  API & Contribution |
|---|---|---|
| [Command](https://code.visualstudio.com/api/extension-guides/command) | コマンド |  [commands](https://code.visualstudio.com/api/references/vscode-api#commands)<br>[contributes.commands](https://code.visualstudio.com/api/references/contribution-points#contributes.commands) |
| [Color Theme](https://code.visualstudio.com/api/extension-guides/color-theme) | RGB値 | [contributes.themes](https://code.visualstudio.com/api/references/contribution-points#contributes.themes) |
| [File Icon Theme](https://code.visualstudio.com/api/extension-guides/file-icon-theme) | SVG推奨 |  [contributes.iconThemes](https://code.visualstudio.com/api/references/contribution-points#contributes.iconThemes) |
| [Product Icon Theme](https://code.visualstudio.com/api/extension-guides/product-icon-theme) | フォント | [contributes.productIconThemes](https://code.visualstudio.com/api/references/contribution-points#contributes.productIconThemes) |
| [Tree View](https://code.visualstudio.com/api/extension-guides/tree-view)	| サイドバー | [window.createTreeView](https://code.visualstudio.com/api/references/vscode-api#window.createTreeView)<br>[window.registerTreeDataProvider](https://code.visualstudio.com/api/references/vscode-api#window.registerTreeDataProvider)<br>[TreeView](https://code.visualstudio.com/api/references/vscode-api#TreeView)<br>[TreeDataProvider](https://code.visualstudio.com/api/references/vscode-api#TreeDataProvider)<br>[contributes.views](https://code.visualstudio.com/api/references/contribution-points#contributes.views)<br>[contributes.viewsContainers](https://code.visualstudio.com/api/references/contribution-points#contributes.viewsContainers) |
| [Webview](https://code.visualstudio.com/api/extension-guides/webview) | API超え | [window.createWebviewPanel](https://code.visualstudio.com/api/references/vscode-api#window.createWebviewPanel)<br>[window.registerWebviewPanelSerializer](https://code.visualstudio.com/api/references/vscode-api#window.registerWebviewPanelSerializer) |
| [Custom Editors](https://code.visualstudio.com/api/extension-guides/custom-editors) | Webview +<br>ドキュメント | [window.registerCustomEditorProvider](https://code.visualstudio.com/api/references/vscode-api#window.registerCustomEditorProvider)<br>[CustomTextEditorProvider](https://code.visualstudio.com/api/references/vscode-api#CustomTextEditorProvider)<br>[contributes.customEditors](https://code.visualstudio.com/api/references/contribution-points#contributes.customEditors) |
| [Virtual Documents](https://code.visualstudio.com/api/extension-guides/virtual-documents)	| 読み取り専用 | [workspace.registerTextDocumentContentProvider](https://code.visualstudio.com/api/references/vscode-api#workspace.registerTextDocumentContentProvider)<br>[commands.registerCommand](https://code.visualstudio.com/api/references/vscode-api#commands.registerCommand)<br>[window.showInputBox](https://code.visualstudio.com/api/references/vscode-api#window.showInputBox) |
| [Virtual Workspaces](https://code.visualstudio.com/api/extension-guides/virtual-workspaces) | 仮想リソース | [workspace.fs](https://code.visualstudio.com/api/references/vscode-api#workspace.fs)<br>capabilities.virtualWorkspaces |
| [Workspace Trust](https://code.visualstudio.com/api/extension-guides/workspace-trust) | 制限モード | [workspace.isTrusted](https://code.visualstudio.com/api/references/vscode-api#workspace.isTrusted)<br>[workspace.onDidGrantWorkspaceTrust](https://code.visualstudio.com/api/references/vscode-api#workspace.onDidGrantWorkspaceTrust)<br>capabilities.untrustedWorkspaces
| [Task Provider](https://code.visualstudio.com/api/extension-guides/task-provider) | 自動検出 | [tasks.registerTaskProvider](https://code.visualstudio.com/api/references/vscode-api#tasks.registerTaskProvider)<br>[Task](https://code.visualstudio.com/api/references/vscode-api#Task)<br>[ShellExecution](https://code.visualstudio.com/api/references/vscode-api#ShellExecution)<br>[contributes.taskDefinitions](https://code.visualstudio.com/api/references/contribution-points#contributes.taskDefinitions)
| [Source Control](https://code.visualstudio.com/api/extension-guides/scm-provider) | git以外も | [workspace.workspaceFolders](https://code.visualstudio.com/api/references/vscode-api#workspace.workspaceFolders)<br>[SourceControl](https://code.visualstudio.com/api/references/vscode-api#SourceControl)<br>[SourceControlResourceGroup](https://code.visualstudio.com/api/references/vscode-api#SourceControlResourceGroup)<br>[scm.createSourceControl](https://code.visualstudio.com/api/references/vscode-api#scm.createSourceControl)<br>[TextDocumentContentProvider](https://code.visualstudio.com/api/references/vscode-api#TextDocumentContentProvider)<br>[contributes.menus](https://code.visualstudio.com/api/references/contribution-points#contributes.menus) |
| [Debugger Extension](https://code.visualstudio.com/api/extension-guides/debugger-extension) | デバッガ統合 | [contributes.breakpoints](https://code.visualstudio.com/api/references/contribution-points#contributes.breakpoints)<br>[contributes.debuggers](https://code.visualstudio.com/api/references/contribution-points#contributes.debuggers)<br>[debug](https://code.visualstudio.com/api/references/vscode-api#debug) |
| [Markdown Extension](https://code.visualstudio.com/api/extension-guides/markdown-extension) | プレビュー強化 | markdown.previewStyles<br>markdown.markdownItPlugins<br>markdown.previewScripts |
| [Test Extension](https://code.visualstudio.com/api/extension-guides/testing) | 検出と公開 | [TestController](https://code.visualstudio.com/api/references/vscode-api#TestController)<br>[TestItem](https://code.visualstudio.com/api/references/vscode-api#TestItem) |
| [Custom Data Extension](https://code.visualstudio.com/api/extension-guides/custom-data-extension) | HTML/CSS | contributes.html.customData<br>contributes.css.customData |

[AI](https://code.visualstudio.com/api/extension-guides/ai/ai-extensibility-overview)（いろいろ）、[Notebook](https://code.visualstudio.com/api/extension-guides/notebook)（Jupyterみたいな）、[Web Extensions](https://code.visualstudio.com/api/extension-guides/web-extensions)（VS Code を Web で使用する場合）、[Telemetry](https://code.visualstudio.com/api/extension-guides/telemetry) （使用状況データを収集し、Microsoft に送信）が一覧にはありません。

# [UXガイドライン](https://code.visualstudio.com/api/ux-guidelines/overview)
## コンテナ
コンテナはVS Codeインターフェースの中で、1つ以上のアイテムをレンダリングする大きなセクションと考えることができます。

![](https://code.visualstudio.com/assets/api/ux-guidelines/examples/architecture-containers.png)

### アクティビティバー（一番左端）
拡張機能は、プライマリサイドバーにビューをレンダリングするビューコンテナとして機能するアイテムをアクティビティバーに追加できます。

### プライマリサイドバー（左）
アクティビティバーのアイテム（ビューコンテナ）をクリックすると、プライマリサイドバーが開き、そのビューコンテナに関連付けられた1つ以上のビューが表示されます。

### セカンダリサイドバー（右か下）
ユーザーは、ターミナルビューや問題ビューなどのビューをセカンダリサイドバーにドラッグして、レイアウトをカスタマイズできます。

### エディタ（主役）
エディター領域には、1つ以上のエディターグループが含まれます。拡張機能は、エディター領域で開くカスタムエディターやWebビューを提供できます。また、エディターツールバーに追加のアイコンボタンを表示するエディターアクションを提供することもできます。

### パネル
拡張機能では、アクティビティバー/プライマリサイドバーではなく、パネルにビューコンテナを追加することもできます。

### ステータスバー
ステータスバーには、2つのステータスバー項目のグループが表示されます。

## アイテム

![](https://code.visualstudio.com/assets/api/ux-guidelines/examples/architecture-sections.png)

### ビュー
ビューは、ツリー ビュー、ウェルカム ビュー、またはWebview ビューの形式で提供され、インターフェイスの他の領域にドラッグできます。

### 表示ツールバー
拡張機能は、ビュー ツールバーにボタンとして表示されるビュー固有のアクションを公開できます。

### サイドバーツールバー
ビュー コンテナー全体を対象とするアクションは、サイドバー ツールバーにも公開できます。

### エディターツールバー
拡張機能は、エディター ツールバーで直接エディターにスコープされたエディター アクションを提供できます。

### パネルツールバー
パネルツールバーには、現在選択されているビューにスコープされたオプションが表示されます。

### ステータスバー項目
左側のステータスバー項目はワークスペース全体にスコープが設定されています。右側の項目はアクティブなファイルにスコープが設定されています。

## 一般的なUI要素
### コマンドパレット（`Ctrl + Shift + P`）
拡張機能は、コマンド パレットに表示されるコマンドを提供して、一部の機能をすばやく実行できます。

### クイックピック（タイトルバー中央の入力フィールド）
クイックピックは、ユーザーの入力を様々な方法で取得します。単一の選択、複数の選択、あるいは自由形式のテキスト入力を求めることもできます。

### 通知（右下ポップアップ）
通知は、情報、警告、エラーメッセージをユーザーに伝えるために使用されます。また、進行状況を示すためにも使用できます。

### Webviews
Webviews を使用すると、VS Code の「ネイティブ」 API を超えるユースケース向けにカスタム コンテンツと機能を表示できます。

### コンテキストメニュー（右クリック）
コマンドパレットの一貫した場所とは対照的に、コンテキスト メニューを使用すると、ユーザーは特定の場所からアクションを実行したり、何かを構成したりすることができます。

### ウォークスルー（最初にでるやつ？）
ウォークスルーは、豊富なコンテンツを備えた複数ステップのチェックリストを通じて、拡張機能へのユーザーオンボーディングに一貫したエクスペリエンスを提供します。

### 設定
設定により、ユーザーは拡張機能に関連するオプションを構成できます。

# 言語拡張
## [言語拡張の概要](https://code.visualstudio.com/api/language-extensions/overview)
### 宣言型言語機能
宣言型言語機能は設定ファイルで定義されます。例えば、 
- 構文の強調表示
- スニペット補完
- 括弧のマッチング
- ブラケット自動閉鎖
- 括弧の自動囲み
- コメントの切り替え
- 自動インデント
- 折り畳み（マーカーによる）
宣言型言語機能を提供する言語拡張機能を記述するためのガイドが 3 つあります。
- [構文ハイライトガイド](https://code.visualstudio.com/api/language-extensions/syntax-highlight-guide)： VS Code は構文ハイライトに TextMate 文法を使用します。このガイドでは、シンプルな TextMate 文法を記述し、それを VS Code 拡張機能に変換する手順を説明します。
- [スニペット補完ガイド](https://code.visualstudio.com/api/language-extensions/snippet-guide): このガイドでは、一連のスニペットを拡張機能にバンドルする方法について説明します。
- [言語設定ガイド](https://code.visualstudio.com/api/language-extensions/language-configuration-guide)： VS Code では、拡張機能を使ってあらゆるプログラミング言語の言語設定を定義できます。このファイルは、コメントの切り替え、括弧の一致/囲み、領域の折りたたみ（レガシー）といった基本的な編集機能を制御します。

### プログラム言語の機能
これらの機能は、多くの場合、言語サーバーによって提供されます。言語サーバーは、プロジェクトを分析して動的な機能を提供するプログラムです。例えば、
- ホバー情報（`vscode.languages.registerHoverProvider`）
- 自動補完（`vscode.languages.registerCompletionItemProvider`）
- 定義へジャンプ (`vscode.languages.registerDefinitionProvider`)
- エラーチェック
- 書式設定
- リファクタリング
- 折りたたみ

### 言語サーバープロトコル（LSP）
言語サーバー (静的コード分析ツール) と言語クライアント (通常はソース コード エディター) 間の通信を標準化することにより、言語サーバー プロトコルでは拡張機能の作成者が 1 つのコード分析プログラムを記述し、それを複数のエディターで再利用できるようになります。

VS Code で言語サーバー拡張機能を実装する方法を説明した詳細な[ガイド](https://code.visualstudio.com/api/language-extensions/language-server-extension-guide)を提供しています。

### 特殊なケース
- [マルチルートワークスペース](https://code.visualstudio.com/docs/editor/multi-root-workspaces)のサポート
- [埋め込み言語](https://code.visualstudio.com/api/language-extensions/embedded-languages)

# テストと公開
## [拡張のテスト](https://code.visualstudio.com/api/working-with-extensions/testing-extension)
Visual Studio Code は、拡張機能のテスト実行とデバッグをサポートしています。これらのテストは、拡張機能開発ホストと呼ばれる VS Code の特別なインスタンス内で実行され、VS Code API へのフルアクセスが可能です。

生成された拡張機能では、`npm run test` または `yarn test` を使用して、次のように統合テストを実行できます。
- VS Code の最新バージョンをダウンロードして解凍します。
- 拡張テスト ランナー スクリプトによって指定された [Mocha](https://mochajs.org/) テストを実行します。

### TODO

## [拡張の公開](https://code.visualstudio.com/api/working-with-extensions/publishing-extension)
高品質な拡張機能を作成したら、VS Code 拡張機能マーケットプレイスに公開して、他のユーザーが拡張機能を見つけ、ダウンロードして使用できるようにすることができます。また、拡張機能をインストール可能な VSIX 形式にパッケージ化して、他のユーザーと共有することもできます。

### TODO

## [拡張のバンドル](https://code.visualstudio.com/api/working-with-extensions/bundling-extension)
Visual Studio Code 拡張機能をバンドルする第一の理由は、あらゆるプラットフォームで VS Code を使用するすべてのユーザーが確実に動作できるようにするためです。github.dev や vscode.dev などの Web 環境向け VS Code では、バンドルされた拡張機能のみを使用できます。VS Codeがブラウザで実行されている場合、拡張機能用に読み込めるファイルは 1 つだけなので、拡張機能コードは 1 つの Web 対応 JavaScript ファイルにバンドルする必要があります。

### TODO

## [継続的インテグレーション](https://code.visualstudio.com/api/working-with-extensions/continuous-integration)
拡張機能の統合テストはCIサービス上で実行できます。この `@vscode/test-electron` ライブラリは、CIプロバイダー上で拡張機能のテストを設定するのに役立ち、 Azure Pipelines上の拡張機能のサンプル設定も含まれています。ビルドパイプラインを確認するか、`azure-pipelines.yml` ファイルに直接ジャンプしてください。

### 自動公開
publish コマンドは、`vsce` を使用したローカル環境からの公開に似ていますが、パーソナルアクセストークン（PAT）を安全な方法で提供する必要があります。PAT を `VSCE_PAT` シークレット変数として保存することで、`vsce` はそれを使用できるようになります。シークレット変数は決して公開されないため、CI パイプラインで安全に使用できます。

### [Azure パイプライン](https://code.visualstudio.com/api/working-with-extensions/continuous-integration#azure-pipelines)
たぶん、私は使わないので、リンクを見てやってください🙇

### GitHub アクション
#### TODO

### [GitLab CI](https://code.visualstudio.com/api/working-with-extensions/continuous-integration#gitlab-ci)
たぶん、私は使わないので、リンクを見てやってください🙇
