---
title: "å…¬å¼ã‚µãƒ³ãƒ—ãƒ«ã‚’å…¬å¼Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã«å…¥ã‚Œã‚‹ï¼ˆSQL Serverç·¨ï¼‰"
emoji: "ğŸ¦¡"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["docker", "sqlserver", "sql"]
published: true
publication_name: "robon"
---

# ã¯ã˜ã‚ã«
ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒæ¬²ã—ããªã£ãŸã®ã§ã™ãŒã€æœ€è¿‘ã¯è¦‹ã‹ã‘ãªã„ã‚ˆã†ãªæ°—ãŒã—ã¾ã™ã€‚
æ˜”ã€…ã¯ã€scott/tiger ã§ã¤ãªã„ã§ EMP ãƒ†ãƒ¼ãƒ–ãƒ«ã§ç·´ç¿’ã™ã‚‹ã®ãŒãŠç´„æŸã§ã—ãŸãŒâ€¦ã€‚
èª¿ã¹ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚

æœ€åˆã¯ã€ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å ´æ‰€ã ã‘ã®å‚™å¿˜éŒ²ã«ã—ã‚ˆã†ã¨æ€ã£ãŸã®ã§ã™ãŒã€ã¡ã‚‡ã£ã¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½¿ã£ãŸãƒ‡ãƒ¢ã¨ã‹ãƒ†ã‚¹ãƒˆãŒå¿…è¦ã«ãªã£ãŸã®ã§ã€ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å…¥ã‚Šã® Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã£ã¦ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã‚‹ææ–™ã‚‚ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚‚å…¬é–‹ã—ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚

# SQL Server ç·¨
MySQL ã«ã¯ä¼¼ãŸã‚ˆã†ãªè¨˜äº‹ãŒã„ãã¤ã‹ã‚ã‚Šã¾ã™ï¼ˆè‹¦ç¬‘ï¼‰ã€‚
ã“ã‚Œã¾ã§ã® PostgreSQLã€MySQLã€MariaDB ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã¯ãªãã€Microsoft ã•ã‚“ã¯ç‹¬è‡ªã¨ã„ã†ã‹å…¬å¼ã‚¤ãƒ¡ãƒ¼ã‚¸ã«ã¯åŒã˜ã‚ˆã†ãªæ‹¡å¼µãƒã‚¤ãƒ³ãƒˆã‚’å…¥ã‚Œã¦ãŠã‚‰ãšã€ã‚„ã‚‹ãªã‚‰ã‚µãƒ³ãƒ—ãƒ«è¦‹ãªãŒã‚‰è‡ªåˆ†ã§ä½œã£ã¦ã­ã€‚ã¨ã„ã†ã‚¹ã‚¿ãƒ³ã‚¹ã®ã‚ˆã†ã§ã™ã€‚

## å…¬å¼ Docker ã‚¤ãƒ¡ãƒ¼ã‚¸
ã‚ªãƒ•ã‚£ã‚·ãƒ£ãƒ«ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ã€ä»¥ä¸‹ã«ã‚ã‚Šã¾ã™ã€‚
https://mcr.microsoft.com/product/mssql/server/about

ã“ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã—ã¦ã„ã‚‹ã®ãŒã€ä»¥ä¸‹ã¨æ›¸ã„ã¦ã‚ã‚Šã¾ã™ã€‚
https://github.com/Microsoft/mssql-docker

ã“ã®ã‚ªãƒ•ã‚£ã‚·ãƒ£ãƒ«ã‚¤ãƒ¡ãƒ¼ã‚¸ã® `Usage` ã®ä¸‹ã®æ–¹ã«æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚

> You can also use the tools in an entrypoint.sh script to do things like create databases or logins, attach databases, import data, or other setup tasks. See this example of [using an entrypoint.sh and setup.sql scripts to create a database](https://github.com/microsoft/mssql-docker/tree/master/linux/preview/examples/mssql-customize).

ã¨ã„ã†ã“ã¨ãªã®ã§ã€ã“ã® Dockerfile ã®ã‚µãƒ³ãƒ—ãƒ«ã‚’ã‚¹ã‚¿ãƒ¼ãƒˆåœ°ç‚¹ã¨ã—ã¾ã™ã€‚

## å…¬å¼ã‚µãƒ³ãƒ—ãƒ«
å…¬å¼ã‚µãƒ³ãƒ—ãƒ«ã¯ã€ä»¥ä¸‹ã«ã‚ã‚Šã¾ã—ãŸã€‚
https://learn.microsoft.com/ja-jp/sql/samples/sql-samples-where-are?view=sql-server-ver16

ã“ã“ã® `SQL ã‚µãƒ³ãƒ—ãƒ«ã®ãƒªãƒã‚¸ãƒˆãƒª` ã§ã€[GitHub](https://github.com/microsoft/sql-server-samples) ã«ãŸã©ã‚Šç€ãã¾ã™ã€‚
ä»Šå›ã¯ã€[Northwind and pubs sample databases for Microsoft SQL Server](https://github.com/microsoft/sql-server-samples/tree/master/samples/databases/northwind-pubs) ã‚’çµ„ã¿è¾¼ã‚€ã“ã¨ã«ã—ã¾ã™ã€‚
ã“ã¡ã‚‰ã‚’é¸æŠã—ãŸç†ç”±ã¯ã€Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã«çµ„ã¿è¾¼ã‚€ãƒ•ã‚¡ã‚¤ãƒ«æ•°ãŒå°‘ãªã‹ã£ãŸã‹ã‚‰ã§ã™ã€‚

## Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã‚‹
[using an entrypoint.sh and setup.sql scripts to create a database](https://github.com/microsoft/mssql-docker/tree/master/linux/preview/examples/mssql-customize)ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚

### SQLãƒ•ã‚¡ã‚¤ãƒ«
[Northwind and pubs sample databases for Microsoft SQL Server](https://github.com/microsoft/sql-server-samples/tree/master/samples/databases/northwind-pubs) ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚

### Dockerfile
```dockerfile: Dockerfile
FROM mcr.microsoft.com/mssql/server:2017-latest

# Create a config directory
RUN mkdir -p /usr/config
WORKDIR /usr/config

# Bundle config source
COPY ./entrypoint.sh ./configure-db.sh ./northwind-pubs/instnwnd.sql ./northwind-pubs/instpubs.sql /usr/config/

# Grant permissions for to our scripts to be executable
RUN chmod +x /usr/config/entrypoint.sh \
&& chmod +x /usr/config/configure-db.sh

ENTRYPOINT ["./entrypoint.sh"]
```
ã‚‚ã†ã¡ã‚‡ã£ã¨ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ãªã‚“ã¨ã‹ã¨ã‚‚æ€ã£ãŸã®ã§ã™ãŒã€ã‚ªãƒªã‚¸ãƒŠãƒ«ã«æ•¬æ„ã‚’è¡¨ã—ã¦ã€æœ€å°é™ã®å¤‰æ›´ã§ã€‚

### Makefile
```makefile: Makefile
.PHONY: build run push clean

IMAGE=docker.io/take0a/mssql-nwnd-pubs
CONTAINER=mssql01
PASSWORD=Passw0rd!

build: clean
	docker build . -t $(IMAGE) --no-cache

run:
	docker run --name $(CONTAINER) -dit -e ACCEPT_EULA=Y -e MSSQL_SA_PASSWORD=$(PASSWORD) $(IMAGE)
	docker exec -it $(CONTAINER) /opt/mssql-tools/bin/sqlcmd -S localhost -U sa -P $(PASSWORD)

push:
	docker push $(IMAGE)

clean:
	docker container rm $(CONTAINER) -f
	docker image rm $(IMAGE) -f
```
ã“ã‚“ãªæ„Ÿã˜ã«ã—ã¦ãŠãã¨ã€ã‚³ãƒãƒ³ãƒ‰ã‚’å¿˜ã‚Œã¦ã€Œã‚ã‚ã‚ã€ã—ãªãã¦ã™ã¿ã¾ã™ã€‚

## Docker ã‚¤ãƒ¡ãƒ¼ã‚¸
ä»¥ä¸‹ã§å…¬é–‹ã—ã¾ã—ãŸã€‚
https://hub.docker.com/r/take0a/mssql-nwnd-pubs

`docker pull take0a/mssql-nwnd-pubs` ã§ pull ã§ãã¾ã™ã€‚

## GitHub ãƒªãƒã‚¸ãƒˆãƒª
ä»¥ä¸‹ã§å…¬é–‹ã—ã¾ã—ãŸã€‚
https://github.com/take0a/docker-library/tree/main/mssql

ä»–ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚‚ã®ã‚‚å…¬é–‹ã—ãŸã‚‰ã€å°‘ã—ãã‚Œã„ã«ã—ã¦ãŠãã¾ã™ã€‚

# ãŠã‚ã‚Šã«
ã‚„ã¯ã‚Šã€ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¯å¿…è¦ã§ã™ã‚ˆã­ã€‚
