---
title: "OpenAPI ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ Schema ã‚’å®šç¾©ã™ã‚‹"
emoji: "ğŸ‘€"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["openapi", "swagger", "oas", "json", "schema"]
published: true
publication_name: "robon"
---

# ã¯ã˜ã‚ã«

OpenAPI ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ REST ã‚µãƒ¼ãƒã®ä»•æ§˜ã‚’å®šç¾©ã—ãŸãã¦ã€OpenAPI ä»•æ§˜ã‚’èª¿ã¹ã¦ã¿ãŸã®ã§ã™ãŒã€è‚å¿ƒã®å…¥å‡ºåŠ›ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã®å®šç¾©éƒ¨åˆ†ãŒã€Œã“ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€JSON Schema Specification Draft 2020-12 ã®ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚»ãƒƒãƒˆã§ã™ã€‚ã€ã¿ãŸã„ãªæ„Ÿã˜ã ã£ãŸã®ã§ã€åˆ¥é€”ã€ã¾ã¨ã‚ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚
ä»¥ä¸‹ã®ä»•æ§˜ã‚’ OAS3.1 ã¨å‘¼ã¶ã“ã¨ã«ã—ã¾ã™ã€‚

https://zenn.dev/robon/articles/518f1f4769301f

# Schama 
## å…¨ã¦ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«å¯¾ã™ã‚‹ keyword
### type

OAS3.1 ã§ã¯

> OAS ã®ãƒ‡ãƒ¼ã‚¿å‹ã¯ã€JSON Schema Specification Draft 2020-12 ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹å‹ã«åŸºã¥ã„ã¦ã„ã¾ã™ã€‚å‹ã¨ã—ã¦integerã‚‚ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ãŠã‚Šã€å°æ•°éƒ¨ã¾ãŸã¯æŒ‡æ•°éƒ¨ã®ãªã„ JSON æ•°å€¤ã¨ã—ã¦å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

[JSON Schema Validation 6.1.1](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-type) ã§ã¯

> String values MUST be one of the six primitive types ("null", "boolean", "object", "array", "number", or "string"), or "integer" which matches any number with a zero fractional part.

ã¨ã„ã†ã“ã¨ã§ã€type å±æ€§ã«ã¯ã€ä¸Šè¨˜ã® 7 ã¤ãŒæŒ‡å®šã§ãã¾ã™ã€‚

### format

OAS3.1 ã§ã¯ã€integer ã« int32 ã¨ int64 ã‚’ã€number ã« float ã¨ double ã‚’ã€string ã« password ã‚’å®šç¾©ã—ã¦ã„ã¾ã—ãŸã€‚[JSON Schema Validation 7.3](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-defined-formats) ã¨åˆã‚ã›ã¦ã€type ã¨ã®é–¢é€£ã‚‚æ•´ç†ã™ã‚‹ã¨ã€

| type | format | ã‚³ãƒ¡ãƒ³ãƒˆ | OAS3.1 |
|---|---|---|:---:|
|null||||
|boolean||||
|object||||
|array||||
|number|float||ã€‡|
|number|double||ã€‡|
|string|date-time|[RFC3339](https://www.rfc-editor.org/rfc/rfc3339.html) ä¾‹ï¼š2018-11-13T20:20:39+00:00||
|string|date|[RFC3339](https://www.rfc-editor.org/rfc/rfc3339.html) ä¾‹ï¼š2018-11-13||
|string|time|[RFC3339](https://www.rfc-editor.org/rfc/rfc3339.html) ä¾‹ï¼š20:20:39+00:00||
|string|duration|[RFC3339](https://www.rfc-editor.org/rfc/rfc3339.html) ä¾‹ï¼šP3D||
|string|email|[RFC5321](https://www.rfc-editor.org/rfc/rfc5321.html)||
|string|idn-email|[RFC6531](https://www.rfc-editor.org/rfc/rfc6531.html)||
|string|hostname|[RFC1123](https://www.rfc-editor.org/rfc/rfc1123.html)||
|string|idn-hostname|[RFC5890](https://www.rfc-editor.org/rfc/rfc5890.html)||
|string|ipv4|[RFC2673](https://www.rfc-editor.org/rfc/rfc2673.html)||
|string|ipv6|[RFC4291](https://www.rfc-editor.org/rfc/rfc4291.html)||
|string|uri|[RFC3986](https://www.rfc-editor.org/rfc/rfc3986.html)||
|string|uri-reference|[RFC3986](https://www.rfc-editor.org/rfc/rfc3986.html)||
|string|iri|[RFC3987](https://www.rfc-editor.org/rfc/rfc3987.html)||
|string|iri-reference|[RFC3987](https://www.rfc-editor.org/rfc/rfc3987.html)||
|string|uuid|[RFC4122](https://www.rfc-editor.org/rfc/rfc4122.html) ä¾‹ï¼š3e4666bf-d5e5-4aa7-b8ce-cefe41c7568a||
|string|uri-template|[RFC6570](https://www.rfc-editor.org/rfc/rfc6570.html)||
|string|json-pointer|[RFC6901](https://www.rfc-editor.org/rfc/rfc6901.html) ä¾‹ï¼š#/foo/bar/||
|string|relative-json-pointer|[relative-json-pointer](https://datatracker.ietf.org/doc/html/draft-handrews-relative-json-pointer-01)||
|string|regex|[ECMA-262](https://tc39.es/ecma262/#sec-regexp-regular-expression-objects)||
|string|password||ã€‡|
|integer|int32|ç¬¦å·ä»˜ã 32 bit æ•´æ•°|ã€‡|
|integer|int64|ç¬¦å·ä»˜ã 64 bit æ•´æ•°|ã€‡|

### enum ã¨ const

[JSON Schema Validation 6.1](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-validation-keywords-for-any) ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚ä¸Šè¨˜ã® null ã‚’å«ã‚€ã©ã®å‹ã®å€¤ã§ã‚‚è‰¯ãã€const ã¯ã€å€™è£œãŒå˜ä¸€ã® enum ã¨åŒã˜ã§ã™ã€‚enum ã¾ãŸã¯ const ã§æŒ‡å®šã•ã‚ŒãŸã„ãšã‚Œã‹ã®å€¤ã«ä¸€è‡´ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

### é©ç”¨å¯èƒ½ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆapplicatorï¼‰

| keyword | ã‚³ãƒ¡ãƒ³ãƒˆ |
|---|---|
| oneOf | ã“ã® keyword ã«å±ã™ã‚‹ schema ã®ã†ã¡ã€1 ã¤ã ã‘ãŒæº€ãŸã•ã‚Œãªã‘ã‚Œã°ãªã‚‰ãªã„ |
| allOf | ã“ã® keyword ã«å±ã™ã‚‹ schema ã®å…¨ã¦ãŒæº€ãŸã•ã‚Œãªã‘ã‚Œã°ãªã‚‰ãªã„ |
| anyOf | ã“ã® keyword ã«å±ã™ã‚‹ schema ã®ã†ã¡ã€ã©ã‚Œã‹ 1 ã¤ä»¥ä¸ŠãŒæº€ãŸã•ã‚Œãªã‘ã‚Œã°ãªã‚‰ãªã„ |
| if | ã“ã® keyword ã«å±ã™ã‚‹ schema ãŒæº€ãŸã•ã‚ŒãŸå ´åˆã€then ãŒã€ãã†ã§ãªã„å ´åˆã€else ãŒæº€ãŸã•ã‚Œãªã‘ã‚Œã°ãªã‚‰ãªã„ |
| then |  |
| else |  |
| not | Schema ã‚’æº€ãŸã™ã€æº€ãŸã•ãªã„ã®å¦å®šï¼ˆãªã®ã§ã€é€†ã«ãªã‚‹ï¼‰ |

### æ³¨é‡ˆï¼ˆannotationï¼‰

| keyword | ã‚³ãƒ¡ãƒ³ãƒˆ |
|---|---|
| title | åç§° |
| description | èª¬æ˜ |
| default | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å€¤ |
| deprecated | éæ¨å¥¨ã®å ´åˆã¯ true |
| examples | ä½¿ç”¨æ–¹æ³•ã‚’ç¤ºã™ãŸã‚ã®ã‚µãƒ³ãƒ—ãƒ« |
| readonly | æ›¸ãæ›ãˆä¸å¯ã®å ´åˆã¯ true |
| writeonly | å…¥åŠ›ãŒå­˜åœ¨ã›ãšã€å‡ºåŠ›ã®ã¿ã®å ´åˆã¯ true |

## æ•°å€¤ï¼ˆnumber ã¨ integerï¼‰
### æ¤œè¨¼ï¼ˆvalidationï¼‰

[JSON Schema Validation 6.2](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-validation-keywords-for-num) ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚

| keyword | ã‚³ãƒ¡ãƒ³ãƒˆ |
|---|---|
| multipleOf | æŒ‡å®šã—ãŸ 0 ã‚ˆã‚Šå¤§ãã„æ•°å€¤ã®å€æ•°ã§ã‚ã‚‹ |
| maximum | æŒ‡å®šã—ãŸæ•°å€¤ä»¥ä¸‹ã§ã‚ã‚‹ |
| exclusiveMaximum | æŒ‡å®šã—ãŸæ•°å€¤æœªæº€ã§ã‚ã‚‹ |
| minimum | æŒ‡å®šã—ãŸæ•°å€¤ä»¥ä¸Šã§ã‚ã‚‹ |
| exclusiveMinimum | æŒ‡å®šã—ãŸæ•°å€¤ã‚ˆã‚Šå¤§ãã„ |

## æ–‡å­—åˆ—ï¼ˆstringï¼‰
### æ¤œè¨¼ï¼ˆvalidationï¼‰

[JSON Schema Validation 6.3](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-validation-keywords-for-str) ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚

| keyword | ã‚³ãƒ¡ãƒ³ãƒˆ |
|---|---|
| maxLength | æŒ‡å®šã—ãŸ 0 ä»¥ä¸Šã®æ•´æ•°ä»¥ä¸‹ã®æ–‡å­—æ•°ã§ã‚ã‚‹ã€‚æ–‡å­—æ•°ã®å®šç¾©ã¯ [RFC8259](https://www.rfc-editor.org/rfc/rfc8259.html) |
| minLength | æŒ‡å®šã—ãŸ 0 ä»¥ä¸Šã®æ•´æ•°ä»¥ä¸Šã®æ–‡å­—æ•°ã§ã‚ã‚‹ |
| pattern | æŒ‡å®šã•ã‚ŒãŸæ­£è¦è¡¨ç¾ã«ãƒãƒƒãƒã™ã‚‹ã€‚æŒ‡å®šã§ãã‚‹æ­£è¦è¡¨ç¾ã¯ [ECMA-262](https://tc39.es/ecma262/#sec-regexp-regular-expression-objects) |

## é…åˆ—ï¼ˆarrayï¼‰

JSON ã® array ã¯ã€é †åºä»˜ãã®è¦ç´ ã®é›†åˆã§ã‚ã‚‹ã€‚å„è¦ç´ ã®å‹ã¯ç•°ãªã£ã¦ã‚‚ã‚ˆã„ã€‚

### é©ç”¨ã§ãã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆapplicatorï¼‰

| keyword | ã‚³ãƒ¡ãƒ³ãƒˆ |
|---|---|
| prefixItems | é…åˆ—ã®å„è¦ç´ ã¯ã€ã“ã® keyword ã«å±ã™ã‚‹ schema ã®é…åˆ—ã®ã†ã¡å¯¾å¿œã™ã‚‹é †åºã® schema ã‚’æº€ãŸã•ã­ã°ãªã‚‰ãªã„ |
| contains | é…åˆ—ã®å„è¦ç´ ã®ã†ã¡ 1 ã¤ä»¥ä¸Šã¯ã€ã“ã® keyword ã«å±ã™ã‚‹ schema ã‚’æº€ãŸã•ã­ã°ãªã‚‰ãªã„ |
| items | é…åˆ—ã®å„è¦ç´ ã¯ã€ã“ã® keyword ã«å±ã™ã‚‹ schema ã‚’æº€ãŸã•ã­ã°ãªã‚‰ãªã„ |

### æ¤œè¨¼ï¼ˆvalidationï¼‰

[JSON Schema Validation 6.4](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-validation-keywords-for-arr) ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚

| keyword | ã‚³ãƒ¡ãƒ³ãƒˆ |
|---|---|
| maxItems | æŒ‡å®šã—ãŸ 0 ä»¥ä¸Šã®æ•´æ•°ä»¥ä¸‹ã®è¦ç´ æ•°ã§ã‚ã‚‹ |
| minItems | æŒ‡å®šã—ãŸ 0 ä»¥ä¸Šã®æ•´æ•°ä»¥ä¸Šã®è¦ç´ æ•°ã§ã‚ã‚‹ |
| uniqueItems | true ã®å ´åˆã¯å…¨ã¦ã®è¦ç´ ãŒç•°ãªã‚‹ã€‚false ã®å ´åˆã¯å¸¸ã«æ­£ã—ã„ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ false |
| maxContains | [JSON Schema Core 10.3.1.3](https://json-schema.org/draft/2020-12/json-schema-core.html#name-contains) ã§å®šç¾©ã•ã‚Œã‚‹ contains ã•ã‚ŒãŸã‚‚ã®ãŒã€æŒ‡å®šã•ã‚ŒãŸ 0 ä»¥ä¸Šã®æ•´æ•°ä»¥ä¸‹ã®è¦ç´ æ•°ã§ã‚ã‚‹ |
| minContains | contains ã•ã‚ŒãŸã‚‚ã®ãŒã€æŒ‡å®šã•ã‚ŒãŸ 0 ä»¥ä¸Šã®æ•´æ•°ä»¥ä¸Šã®è¦ç´ æ•°ã§ã‚ã‚‹ |

## ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆobjectï¼‰

JSON ã® object ã¯ã€æ–‡å­—åˆ—ãŒ key ã® map ã§ã‚ã‚‹ã€‚map ã•ã‚Œã‚‹ value ã®å‹ã¯ç•°ãªã£ã¦ã‚‚ã‚ˆã„ã€‚

### é©ç”¨ã§ãã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆapplicatorï¼‰

| keyword | ã‚³ãƒ¡ãƒ³ãƒˆ |
|---|---|
| properties | ã“ã® keyword ã«ã¯ object ãŒæŒ‡å®šã•ã‚Œã€ãã® object ã® key ã¯ã€ã“ã® keyword ãŒå±ã™ã‚‹ object ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åã¨ã—ã¦æ‰±ã‚ã‚Œã€ãã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åã¨åˆè‡´ã™ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ value ã® shema ã‚’æº€ãŸã•ã­ã°ãªã‚‰ãªã„ |
| patternProperties | ã“ã® keyword ã¯ã€properties ã® key ãŒæ­£è¦è¡¨ç¾æ–‡å­—åˆ—ã§ã‚ã‚Šã€key ã®æ­£è¦è¡¨ç¾ã‚’æº€ãŸã™ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åã‚’æŒã¤ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ã€value ã® schama ã‚’æº€ãŸã•ã­ã°ãªã‚‰ãªã„ |
| additionalProperties | ã“ã®å€¤ãŒ false ã®å ´åˆã€properties ã¾ãŸã¯ patternProperties ã‚’æº€ãŸã™ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ã¿ãŒè¨±ã•ã‚Œã‚‹ã€‚true ã®å ´åˆã¯ã€ä»»æ„ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒè¿½åŠ ã•ã‚Œã¦ã‚ˆã„ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ true |
| dependentSchemas | ã“ã® keyword ã«ã¯ object ãŒæŒ‡å®šã•ã‚Œã€ãã® object ã® key ã«åˆè‡´ã™ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒå­˜åœ¨ã—ã¦ã„ã‚‹å ´åˆã€ã“ã® keyword ãŒå±ã™ã‚‹ object ã¯ã€value ã® schama ã‚’æº€ãŸã•ã­ã°ãªã‚‰ãªã„ |
| propertyNames | å…¨ã¦ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åãŒã€æŒ‡å®šã•ã‚ŒãŸ schema ã‚’æº€ãŸã•ã­ã°ãªã‚‰ãªã„ |

### æ¤œè¨¼ï¼ˆvalidationï¼‰

[JSON Schema Validation 6.5](https://json-schema.org/draft/2020-12/json-schema-validation.html#name-validation-keywords-for-obj) ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚

| keyword | ã‚³ãƒ¡ãƒ³ãƒˆ |
|---|---|
| maxProperties | æŒ‡å®šã•ã‚ŒãŸ 0 ä»¥ä¸Šã®æ•´æ•°ä»¥ä¸‹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£æ•°ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹ |
| minProperties | æŒ‡å®šã•ã‚ŒãŸ 0 ä»¥ä¸Šã®æ•´æ•°ä»¥ä¸Šã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£æ•°ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹ |
| required | æŒ‡å®šã•ã‚ŒãŸæ–‡å­—åˆ—ã®é…åˆ—ã®å…¨ã¦ã®è¦ç´ ã‚’åå‰ã¨ã™ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹ |
| dependentRequired | ç‰¹å®šã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒå­˜åœ¨ã™ã‚‹å ´åˆã«å¿…è¦ã¨ãªã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åã®é…åˆ—ãŒæŒ‡å®šã•ã‚Œã‚‹ã®ã§ã€ãã®çµ„ã¿åˆã‚ã›ã‚’æº€ãŸã™ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹ |
