---
title: "SQLMeshでSushi"
emoji: "🕸"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["sqlmesh", "dbt", "python", "duckdb", "uv"]
published: false
publication_name: "robon"
---

# はじめに
少し前の「[SQLMesh入門](https://zenn.dev/robon/articles/c8928f88f62218)」の「おわりに」でこんなことを書きました。
> 公式サイトを含めて、サンプルやトレーニング用の教材が少なく、作者の意図がわかりにくいように思います。

いろいろ探した結果、公式のリポジトリの「これ↓」が、いいんじゃないかな？ということで紹介してみます。

https://github.com/TobikoData/sqlmesh-examples

# やってみた
## 背景
まず、このサンプルの背景ですが、寿司レストランのデータを分析するというユースケースです。
業務システムから５つのテーブルが「raw」スキーマにロードされているところからスタートします。

```mermaid
erDiagram
    marketing {
        id INT "一意のID"
        customer_id INT "顧客ID"
        status TEXT "顧客のアクティビティ・ステータス"
    }
    demographics {
        id INT "一意のID"
        customer_id INT "顧客ID"
        zip TEXT "顧客の郵便番号"
    }
    order {
        id INT "固有のID"
        customer_id INT "顧客ID"
        waiter_id INT "ウェイターID"
        start_ts INT "注文開始時刻"
        end_ts INT "注文終了時刻"
        ds TEXT "日付"
    }
    order_items {
        id INT "固有ID"
        order_id INT "注文ID"
        item_id INT "商品ID"
        quantity INT "商品数量"
        ds TEXT "日付"
    }
    items {
        id INT "固有ID"
        name TEXT "商品名"
        price DOUBLE "商品価格"
        ds TEXT "日付"
    }
```



# おわりに

