---
title: "SQLMeshå…¥é–€"
emoji: "ğŸ•¸"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["sqlmesh", "dbt", "python", "duckdb", "uv"]
published: true
publication_name: "robon"
---

# ã¯ã˜ã‚ã«
> å‘¨å›é…ã‚Œã§ã¯ã‚ã‚Šã¾ã™ãŒã€ãƒ¢ãƒ€ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚¿ãƒƒã‚¯ã‚’å§‹ã‚ãŸã„ã¨æ€ã„ã¾ã™ã€‚
ãƒ¢ãƒ€ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚¿ãƒƒã‚¯ã®ä¸­ã§ã‚‚ã€ELT ã® T ã®éƒ¨åˆ†ã¯ dbt ä¸€æŠã®ã‚ˆã†ãªã®ã§ã€dbt å…¥é–€ã—ã¦ã¿ã¾ã™ã€‚

ã¨ã„ã†ã“ã¨ã§ã€4æœˆã«ã€Œ[dbtå…¥é–€](https://zenn.dev/robon/articles/f1bd403b3a3d95)ã€ã¨ã„ã†è¨˜äº‹ã‚’æ›¸ãã¾ã—ãŸã€‚

ãã—ã¦ã€5/29 ã® dbt-fusion ã®ç™ºè¡¨ã‚’èã„ã¦ã€Rust ã§æ›¸ãç›´ã™ã¿ãŸã„ã ã‹ã‚‰ã€å¤–éƒ¨ä»•æ§˜ã‹ã‚‰ã«ã—ã‚ˆã†ã¨ã€Œ[dbt Artifactsã‹ã‚‰è¦‹ãŸdbt](https://zenn.dev/robon/articles/0bfe8aed582698)ã€ã¨ã„ã†è¨˜äº‹ã‚‚æ›¸ããªãŒã‚‰ã€dbt-fusion ã‚’å¾…ã£ã¦ã„ã¾ã—ãŸã€‚
ã‚‚ã†ã€4ãƒ¶æœˆã«ãªã‚‹ã‹ã‚‰ã€ãã‚ãã‚ [dbt-fusion ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰](https://github.com/dbt-labs/dbt-fusion) ã§ã‚‚èª­ã‚“ã§ã¿ã‚‹ã‹ã¨ã€ï¼ˆRust ã‚’ä¸€å¤œæ¼¬ã‘ã§å‹‰å¼·ã—ã¦ï¼‰èª­ã‚“ã§ã¿ã¾ã—ãŸãŒâ€¦ã€‚ï¼ˆæœ¬å½“ã¯ã€ãã® Rust ã®å‹‰å¼·ã‚‚ dbt-fusion ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰è§£æã§ã‚‚è¨˜äº‹ã‚’æ›¸ã“ã†ã¨æ€ã£ã¦ã„ãŸã®ã§ã™ãŒï¼‰

https://github.com/dbt-labs/dbt-fusion/blob/main/crates/dbt-sa-cli/src/dbt_sa_clap.rs#L68-L90

ã‚ã‚Œã‚Œã‚Œã€`build` ã¨ã‹ `run` ã¨ã‹ç„¡ã„ã®ï¼Ÿ

ã¨ã¯ã„ãˆã€å†’é ­ã§ã‚‚æ›¸ã„ãŸã‚ˆã†ã«ã€ŒT ã®éƒ¨åˆ†ã¯ dbt ä¸€æŠã€ãªã®ã§ã€ï¼ˆè¨˜äº‹ï¼‰ã©ã†ã—ã‚ˆã†ã‹ãªã¨ï¼ˆå¿ƒãŒï¼‰ãƒ•ãƒ©ãƒ•ãƒ©ã—ã¦ã„ãŸã¨ã“ã‚ã€è¦‹ã¤ã‘ã¡ã‚ƒã„ã¾ã—ãŸã€‚

https://www.tobikodata.com/sqlmesh

> [It is more than just a dbt alternative.](https://sqlmesh.readthedocs.io/en/stable/)

ã‚„ã‚‹ã—ã‹ãªã„ã€‚

# ç”¨èªã¨æ¦‚å¿µ
dbt ã¨ã®é•ã„ã«ã¤ã„ã¦ã¯ã€ï¼ˆã‚ˆãçŸ¥ã‚‰ãªã„ã®ã«å‹æ‰‹ãªã“ã¨ã‚’æ›¸ãã¨ä¿¡è€…ã®ã¿ãªã•ã¾ã«å±ã‚‰ã‚Œã‚‹ã®ã§ï¼‰å…¬å¼ã® [FAQ](https://sqlmesh.readthedocs.io/en/stable/faq/faq/#how-is-this-different-from-dbt) ãªã©ã‚’è¦‹ã¦ã‚‚ã‚‰ãˆã‚Œã°ã¨æ€ã„ã¾ã™ã€‚

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆãƒªãƒã‚¸ãƒˆãƒªï¼Ÿï¼‰
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¤ã„ã¦ã¯ã€[Concepts](https://sqlmesh.readthedocs.io/en/stable/concepts/overview/) ã«ãªã„ã®ã§ã€ã‚ã‹ã‚Šã«ãã‹ã£ãŸã®ã§ã™ãŒã€[Guide](https://sqlmesh.readthedocs.io/en/stable/guides/projects/) ã¯ã€ã‚ã‚Šã¾ã™ã€‚
è¦ã™ã‚‹ã«ã€`sqlmesh init` ã§ä½œã‚‰ã‚Œã‚‹ã‚ˆã†ãª SQLMesh ç”¨ã®è³‡æã‚’ç½®ãå˜ä½ã®ã‚ˆã†ã§ã™ã€‚`config.yaml` ã¾ãŸã¯ `config.py` ã®å˜ä½ã¨è€ƒãˆã‚‹æ–¹ãŒè‰¯ã„ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãã†è€ƒãˆã‚‹ã¨ã€ã“ã®æ§‹æˆãƒ•ã‚¡ã‚¤ãƒ«ã§å®šç¾©ã•ã‚Œã‚‹æ§‹æˆã®ç¯„å›²ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨è¨€ãˆã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

1. [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ](https://sqlmesh.readthedocs.io/en/stable/reference/configuration/#projects) - SQLMesh ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®æ§‹æˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€‚
1. [ç’°å¢ƒ](https://sqlmesh.readthedocs.io/en/stable/reference/configuration/#environments) - SQLMesh ç’°å¢ƒã®ä½œæˆ/æ˜‡æ ¼ã€ç‰©ç†ãƒ†ãƒ¼ãƒ–ãƒ« ã‚¹ã‚­ãƒ¼ãƒã€ãŠã‚ˆã³ãƒ“ãƒ¥ãƒ¼ ã‚¹ã‚­ãƒ¼ãƒã®æ§‹æˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€‚
1. [ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤](https://sqlmesh.readthedocs.io/en/stable/reference/configuration/#gateways) - SQLMesh ãŒãƒ‡ãƒ¼ã‚¿ ã‚¦ã‚§ã‚¢ãƒã‚¦ã‚¹ã€çŠ¶æ…‹ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã€ãŠã‚ˆã³ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ã«æ¥ç¶šã™ã‚‹æ–¹æ³•ã®æ§‹æˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€‚
1. [ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤/æ¥ç¶šã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ](https://sqlmesh.readthedocs.io/en/stable/reference/configuration/#gatewayconnection-defaults) - ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ã¾ãŸã¯æ¥ç¶šãŒã™ã¹ã¦æ˜ç¤ºçš„ã«æŒ‡å®šã•ã‚Œã¦ã„ãªã„å ´åˆã®å‹•ä½œã«é–¢ã™ã‚‹æ§‹æˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€‚
1. [ãƒ¢ãƒ‡ãƒ«ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ](https://sqlmesh.readthedocs.io/en/stable/reference/model_configuration/) - ãƒ¢ãƒ‡ãƒ«å›ºæœ‰ã®æ§‹æˆãŒãƒ¢ãƒ‡ãƒ«ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§æ˜ç¤ºçš„ã«æŒ‡å®šã•ã‚Œã¦ã„ãªã„å ´åˆã®å‹•ä½œã«é–¢ã™ã‚‹æ§‹æˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€‚
1. [ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰](https://sqlmesh.readthedocs.io/en/stable/reference/configuration/#debug-mode) - SQLMesh ãŒã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¨å®Œå…¨ãªãƒãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’å‡ºåŠ›ãŠã‚ˆã³ãƒ­ã‚°ã«è¨˜éŒ²ã™ã‚‹ãŸã‚ã®æ§‹æˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€‚

ãƒªãƒã‚¸ãƒˆãƒªï¼Ÿã¨æ›¸ã„ãŸã®ã¯ã€[Multi-Repo guide](https://sqlmesh.readthedocs.io/en/stable/guides/multi_repo/)ã§ã¯ã€`-p` æŒ‡å®šã™ã‚‹ `ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ` ã‚’ `ãƒªãƒã‚¸ãƒˆãƒª` ã¨å‘¼ã‚“ã§ã„ã‚‹ã®ã§ã€ãã†ã„ã†ç”¨èªã®ä½¿ã‚ã‚Œæ–¹ã‚’ã—ã¦ã„ã‚‹å ´åˆã‚‚ã‚ã‚‹ã‹ã‚‚ï¼Ÿã¨ã„ã†æ„Ÿã˜ã§ã™ã€‚

## ãƒ—ãƒ©ãƒ³
> ãƒ—ãƒ©ãƒ³ã¨ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹ã¨ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®ç’°å¢ƒã®çŠ¶æ…‹ã®å·®ç•°ã‚’ã¾ã¨ã‚ãŸå¤‰æ›´ã‚»ãƒƒãƒˆã§ã™ã€‚ãƒ¢ãƒ‡ãƒ«ã®å¤‰æ›´ã‚’ã‚¿ãƒ¼ã‚²ãƒƒãƒˆç’°å¢ƒã«åæ˜ ã•ã›ã‚‹ã«ã¯ã€ãƒ—ãƒ©ãƒ³ã‚’ä½œæˆã—ã¦é©ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã¨ã„ã†ã“ã¨ãªã®ã§ã€SQLMesh ã§ä½œæˆãƒ»å¤‰æ›´ã—ãŸå®šç¾©ã‚’ãƒ‡ãƒ¼ã‚¿ã‚¦ã‚§ã‚¢ãƒã‚¦ã‚¹ã«åæ˜ ã•ã›ã‚‹ã«ã¯ã€`sqlmesh plan` ã‚’ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

## ç’°å¢ƒ
> ç’°å¢ƒã¯ã€å¤‰æ›´å†…å®¹ã‚’ãƒ†ã‚¹ãƒˆãŠã‚ˆã³ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ãã‚‹ç‹¬ç«‹ã—ãŸåå‰ç©ºé–“ã§ã™ã€‚

ç’°å¢ƒãŒå¤‰ã‚ã‚Œã°ã€åå‰ç©ºé–“ãŒå¤‰ã‚ã‚‹ã®ã§ã€åŒã˜åå‰ã®ã¾ã¾ã€æœ¬ç•ªç’°å¢ƒã¨é–‹ç™ºç’°å¢ƒãŒä½œã‚Œã‚‹ã¨ã„ã†ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

ã¾ãŸã€`sqlmesh plan` ã¯ã€æœ¬ç•ªç’°å¢ƒ `prod` ä»¥å¤–ã®ç’°å¢ƒã§ã¯ã€ã‚³ãƒãƒ³ãƒ‰å¼•æ•°ã§ç’°å¢ƒåã‚’æŒ‡å®šã—ã¾ã™ãŒã€ä¸Šè¨˜ã®[ãƒ—ãƒ©ãƒ³](#ãƒ—ãƒ©ãƒ³)ã®å®šç¾©ã‹ã‚‰ã€å¯¾è±¡ã¨ãªã‚‹ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®[çŠ¶æ…‹](#çŠ¶æ…‹)ã‚’å¯¾è±¡ã®ç’°å¢ƒãŒæŒ‡ã™[çŠ¶æ…‹](#çŠ¶æ…‹)ã¨ãƒ‡ãƒ¼ã‚¿ã‚¦ã‚§ã‚¢ãƒã‚¦ã‚¹ã«åæ˜ ã•ã›ã‚‹ã¨ã„ã†é–¢ä¿‚ã«ãªã‚Šã¾ã™ã€‚

## çŠ¶æ…‹
> SQLMesh ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é–¢ã™ã‚‹æƒ…å ±ã‚’çŠ¶æ…‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã—ã¾ã™ã€‚ã“ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¯é€šå¸¸ã€ãƒ¡ã‚¤ãƒ³ã®ã‚¦ã‚§ã‚¢ãƒã‚¦ã‚¹ã¨ã¯åˆ¥ã®ã‚‚ã®ã§ã™ã€‚

SQLMesh çŠ¶æ…‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã¯ã€ä»¥ä¸‹ã®æƒ…å ±ãŒå«ã¾ã‚Œã‚‹[ãã†](https://sqlmesh.readthedocs.io/en/stable/concepts/state/)ã§ã™ã€‚

- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®ã™ã¹ã¦ã® ãƒ¢ãƒ‡ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ ã«é–¢ã™ã‚‹æƒ…å ± (ã‚¯ã‚¨ãƒªã€èª­ã¿è¾¼ã¿é–“éš”ã€ä¾å­˜é–¢ä¿‚)
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®ã™ã¹ã¦ã® ä»®æƒ³ãƒ‡ãƒ¼ã‚¿ç’°å¢ƒ ã®ãƒªã‚¹ãƒˆ
- å„ ä»®æƒ³ãƒ‡ãƒ¼ã‚¿ç’°å¢ƒ ã« æ˜‡æ ¼ ã•ã‚Œã¦ã„ã‚‹ãƒ¢ãƒ‡ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã«å­˜åœ¨ã™ã‚‹ è‡ªå‹•å†ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆ ã«é–¢ã™ã‚‹æƒ…å ±
- ç¾åœ¨ã® SQLMesh / SQLGlot ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãªã©ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é–¢ã™ã‚‹ãã®ä»–ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿

ã“ã“ã§ã€ãƒ¢ãƒ‡ãƒ«ã§ã¯ãªãã€ãƒ¢ãƒ‡ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨è¨€ã£ã¦ã„ã‚‹ã®ã¯ã€[ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ](#ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ)ã ã‹ã‚‰ã ã¨æ€ã„ã¾ã™ã€‚

## ãƒ¢ãƒ‡ãƒ«
> ãƒ¢ãƒ‡ãƒ«ã¯ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆã™ã‚‹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¨ã‚¯ã‚¨ãƒªã§æ§‹æˆã•ã‚Œã€ä»–ã®ãƒ¢ãƒ‡ãƒ«ã‚„SQLMeshã®å¤–éƒ¨ã§ã‚‚ä½¿ç”¨ã§ãã¾ã™ã€‚ãƒ¢ãƒ‡ãƒ«ã¯SQLMeshãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®models/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å®šç¾©ã•ã‚Œã€.sqlãƒ•ã‚¡ã‚¤ãƒ«ã«æ ¼ç´ã•ã‚Œã¾ã™ã€‚

ãƒ¢ãƒ‡ãƒ«ã«ã¯ã€ä»¥ä¸‹ã®ç¨®é¡ãŒã‚ã‚‹[ã‚ˆã†](https://sqlmesh.readthedocs.io/en/stable/concepts/models/model_kinds/)ã§ã™ã€‚

- INCREMENTAL_BY_TIME_RANGE
    INCREMENTAL_BY_TIME_RANGE ã‚¿ã‚¤ãƒ—ã®ãƒ¢ãƒ‡ãƒ«ã¯ã€æ™‚é–“ç¯„å›²ã«åŸºã¥ã„ã¦å¢—åˆ†çš„ã«è¨ˆç®—ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ã€ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒæ™‚é–“ã®çµŒéã¨ã¨ã‚‚ã«ã‚­ãƒ£ãƒ—ãƒãƒ£ã•ã‚Œã€ã‚¤ãƒ™ãƒ³ãƒˆã€ãƒ­ã‚°ã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãªã©ã®ä¸å¤‰ã®ãƒ•ã‚¡ã‚¯ãƒˆã‚’è¡¨ã™ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«æœ€é©ãªé¸æŠè‚¢ã§ã™ã€‚é©åˆ‡ãªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«ã“ã®ã‚¿ã‚¤ãƒ—ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€é€šå¸¸ã€ã‚³ã‚¹ãƒˆã¨æ™‚é–“ã‚’å¤§å¹…ã«ç¯€ç´„ã§ãã¾ã™ã€‚
- INCREMENTAL_BY_UNIQUE_KEY
    INCREMENTAL_BY_UNIQUE_KEY ã‚¿ã‚¤ãƒ—ã®ãƒ¢ãƒ‡ãƒ«ã¯ã€ã‚­ãƒ¼ã«åŸºã¥ã„ã¦å¢—åˆ†çš„ã«è¨ˆç®—ã•ã‚Œã¾ã™ã€‚
- FULL
    FULL å‹ã®ãƒ¢ãƒ‡ãƒ«ã§ã¯ã€ãƒ¢ãƒ‡ãƒ«ã«é–¢é€£ä»˜ã‘ã‚‰ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¯ã€ãƒ¢ãƒ‡ãƒ«è©•ä¾¡ã®ãŸã³ã«å®Œå…¨ã«æ›´æ–°ï¼ˆæ›¸ãæ›ãˆï¼‰ã•ã‚Œã¾ã™ã€‚
- VIEW
    VIEW å‹ã®ãƒ¢ãƒ‡ãƒ«ã¯ã€ãƒ¢ãƒ‡ãƒ«ã‚¯ã‚¨ãƒªã®å‡ºåŠ›ãŒãƒãƒ†ãƒªã‚¢ãƒ©ã‚¤ã‚ºã•ã‚Œã€ç‰©ç†ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜ã•ã‚Œã‚‹ã®ã§ã¯ãªãã€ãƒ¢ãƒ‡ãƒ«ã®ã‚¯ã‚¨ãƒªã«åŸºã¥ã„ã¦ã€éãƒãƒ†ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ‰ãƒ“ãƒ¥ãƒ¼ï¼ˆã¾ãŸã¯ã€Œä»®æƒ³ãƒ†ãƒ¼ãƒ–ãƒ«ã€ï¼‰ãŒä½œæˆã¾ãŸã¯ç½®æ›ã•ã‚Œã¾ã™ã€‚
- EMBEDDED
    åŸ‹ã‚è¾¼ã¿ãƒ¢ãƒ‡ãƒ«ã¯ã€ç•°ãªã‚‹ç¨®é¡ã®ãƒ¢ãƒ‡ãƒ«é–“ã§å…±é€šã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹æ–¹æ³•ã§ã™ã€‚
- SEED
    SEED ãƒ¢ãƒ‡ãƒ«ã®ç¨®é¡ã¯ã€SQLMesh ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§é™çš„ CSV ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã® ã‚·ãƒ¼ãƒ‰ ãƒ¢ãƒ‡ãƒ« ã‚’æŒ‡å®šã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
- SCD Type 2
    SCD Type 2 ã¯ã€SQLMesh ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ ç·©ã‚„ã‹ã«å¤‰åŒ–ã™ã‚‹ãƒ‡ã‚£ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ (SCD) ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãƒ¢ãƒ‡ãƒ«ç¨®åˆ¥ã§ã™ã€‚SCD ã¯ãƒ‡ãƒ¼ã‚¿ã‚¦ã‚§ã‚¢ãƒã‚¦ã‚¹ã§ã‚ˆãä½¿ç”¨ã•ã‚Œã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã€ãƒ¬ã‚³ãƒ¼ãƒ‰ã®å¤‰æ›´ã‚’æ™‚é–“çµŒéã¨ã¨ã‚‚ã«è¿½è·¡ã§ãã¾ã™ã€‚
    SQLMesh ã¯ã€ãƒ¢ãƒ‡ãƒ«ã« valid_from åˆ—ã¨ valid_to åˆ—ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ã“ã‚Œã‚’å®Ÿç¾ã—ã¾ã™ã€‚
- EXTERNAL
    EXTERNALãƒ¢ãƒ‡ãƒ«ç¨®åˆ¥ã¯ã€å¤–éƒ¨ãƒ†ãƒ¼ãƒ–ãƒ«ã«é–¢ã™ã‚‹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã™ã‚‹å¤–éƒ¨ãƒ¢ãƒ‡ãƒ«ã‚’æŒ‡å®šã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚å¤–éƒ¨ãƒ¢ãƒ‡ãƒ«ã¯ç‰¹åˆ¥ãªãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚Šã€ä»–ã®ãƒ¢ãƒ‡ãƒ«ç¨®åˆ¥ã®ã‚ˆã†ã«.sqlãƒ•ã‚¡ã‚¤ãƒ«ã§æŒ‡å®šã•ã‚Œã¾ã›ã‚“ã€‚ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ãŒã€SQLMeshãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚¯ã‚¨ãƒªã•ã‚ŒãŸå¤–éƒ¨ãƒ†ãƒ¼ãƒ–ãƒ«ã®åˆ—ã¨å‹æƒ…å ±ã‚’ä¼æ’­ã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚
- MANAGEDï¼ˆé–‹ç™ºä¸­ï¼‰
    MANAGED ãƒ¢ãƒ‡ãƒ«ã¯ã€åŸºç›¤ã¨ãªã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ³ãŒãƒ‡ãƒ¼ã‚¿ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’ç®¡ç†ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
    Snowflake ã® [Dynamic tables](https://docs.snowflake.com/user-guide/dynamic-tables-about) ã‚’æƒ³å®šã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ï¼ˆçŸ¥ã‚‰ã‚“ã‘ã©ï¼‰
- INCREMENTAL_BY_PARTITION
    INCREMENTAL_BY_PARTITION ã‚¿ã‚¤ãƒ—ã®ãƒ¢ãƒ‡ãƒ«ã¯ã€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã«åŸºã¥ã„ã¦å¢—åˆ†çš„ã«è¨ˆç®—ã•ã‚Œã¾ã™ã€‚åˆ—ã®ã‚»ãƒƒãƒˆã¯ãƒ¢ãƒ‡ãƒ«ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚­ãƒ¼ã‚’å®šç¾©ã—ã€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã¯åŒã˜ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚­ãƒ¼å€¤ã‚’æŒã¤è¡Œã®ã‚°ãƒ«ãƒ¼ãƒ—ã§ã™ã€‚
- INCREMENTAL_UNMANAGED
    INCREMENTAL_UNMANAGED ãƒ¢ãƒ‡ãƒ«ã¯ã€è¿½åŠ å°‚ç”¨ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã«å­˜åœ¨ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€SQLMesh ãŒãƒ‡ãƒ¼ã‚¿ã®ãƒ­ãƒ¼ãƒ‰æ–¹æ³•ã‚’ç®¡ç†ã—ãªã„ã¨ã„ã†æ„å‘³ã§ã€Œéç®¡ç†ã€ã§ã™ã€‚SQLMesh ã¯è¨­å®šã•ã‚ŒãŸé »åº¦ã§ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã—ã€å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ãƒ†ãƒ¼ãƒ–ãƒ«ã«è¿½åŠ ã—ã¾ã™ã€‚
    Data Vault ãªã©ã®ãƒ‡ãƒ¼ã‚¿ç®¡ç†ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã¯ã€è¿½åŠ å°‚ç”¨ã®ãƒ†ãƒ¼ãƒ–ãƒ«ãŒä½¿ç”¨ã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ï¼ˆçŸ¥ã‚‰ã‚“ã‘ã©ï¼‰

## ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ
> ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¨ã¯ã€ç‰¹å®šã®æ™‚ç‚¹ã«ãŠã‘ã‚‹ãƒ¢ãƒ‡ãƒ«ã®è¨˜éŒ²ã§ã™ã€‚ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã«ã¯ã€ãƒ¢ãƒ‡ãƒ«ã®ã‚³ãƒ”ãƒ¼ã«åŠ ãˆã¦ã€ãƒ¢ãƒ‡ãƒ«ã‚’è©•ä¾¡ã—ã¦ã‚¯ã‚¨ãƒªã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ãŸã‚ã«å¿…è¦ãªã™ã¹ã¦ã®æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€SQLMesh ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ãã®ãƒ¢ãƒ‡ãƒ«ãŒé€²åŒ–ãƒ»å¤‰åŒ–ã—ã¦ã‚‚ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å±¥æ­´ã¨ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€è²«ã—ãŸæ–¹æ³•ã§æŠŠæ¡ã§ãã¾ã™ã€‚ãƒ¢ãƒ‡ãƒ«ã‚¯ã‚¨ãƒªã«ã¯ãƒã‚¯ãƒ­ãŒå«ã¾ã‚Œã‚‹å ´åˆãŒã‚ã‚‹ãŸã‚ã€å„ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã«ã¯ã€ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆä½œæˆæ™‚ç‚¹ã®ã™ã¹ã¦ã®ãƒã‚¯ãƒ­å®šç¾©ã¨ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã®ã‚³ãƒ”ãƒ¼ãŒä¿å­˜ã•ã‚Œã¾ã™ã€‚ã•ã‚‰ã«ã€ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã«ã¯ãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã™ã‚‹æœŸé–“ã‚‚ä¿å­˜ã•ã‚Œã¾ã™ã€‚

# ã‚„ã£ã¦ã¿ãŸ
ã¾ã€ã‚„ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ï¼ˆuv ã‚„ duckdb ã«ã¤ã„ã¦ã¯ã€ä»¥å‰ã®è¨˜äº‹ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼‰

## Get started
[ã“ã‚Œ](https://sqlmesh.readthedocs.io/en/stable/quickstart/cli/)ã§ã™ã€‚

### æº–å‚™
```bash
uv init sqlmesh-example
cd sqlmesh-example
uv venv
uv add sqlmesh
```

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
```bash
uv run sqlmesh init duckdb
tree .
```

ç„¡è¨€ã§çµ‚ã‚ã‚‹ï¼ˆã‚ˆã†ã«å¼•æ•°ã¤ã‘ãŸï¼‰ã®ã§ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­èº«ã‚’ã¿ã¦ãŠãã¾ã™ï¼ˆuv init ã®åˆ†ã‚‚å…¥ã£ã¦ã¾ã™ãŒï¼‰ã€‚

```
.
â”œâ”€â”€ README.md
â”œâ”€â”€ audits
â”‚   â””â”€â”€ assert_positive_order_ids.sql
â”œâ”€â”€ config.yaml
â”œâ”€â”€ logs
â”‚   â””â”€â”€ sqlmesh_2025_09_24_06_32_07.log
â”œâ”€â”€ macros
â”‚   â””â”€â”€ __init__.py
â”œâ”€â”€ main.py
â”œâ”€â”€ models
â”‚   â”œâ”€â”€ full_model.sql
â”‚   â”œâ”€â”€ incremental_model.sql
â”‚   â””â”€â”€ seed_model.sql
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ seeds
â”‚   â””â”€â”€ seed_data.csv
â”œâ”€â”€ tests
â”‚   â””â”€â”€ test_full_model.yaml
â””â”€â”€ uv.loc
```

ãƒã‚¯ãƒ­ä»¥å¤–ã¯ã‚µãƒ³ãƒ—ãƒ«ã‚’ä½œã£ã¦ãã‚Œã¦ã¾ã™ã€‚

### æœ¬ç•ªç’°å¢ƒä½œæˆ
`sqlmesh init` ã§ `duckdb` ã‚’æŒ‡å®šã—ãŸã®ã§ã€ã‚µãƒ³ãƒ—ãƒ«ã§å®šç¾©ã•ã‚ŒãŸã„ã‚‹ã‚‚ã®ã‚’ duckdb ã«ä½œæˆã—ã¾ã™ã€‚

```
$ uv run sqlmesh plan
.
======================================================================
Successfully Ran 1 tests against duckdb in 0.09 seconds.
----------------------------------------------------------------------
Initializing new project state...

`prod` environment will be initialized

Models:
â””â”€â”€ Added:
    â”œâ”€â”€ sqlmesh_example.full_model
    â”œâ”€â”€ sqlmesh_example.incremental_model
    â””â”€â”€ sqlmesh_example.seed_model
Models needing backfill:
â”œâ”€â”€ sqlmesh_example.full_model: [full refresh]
â”œâ”€â”€ sqlmesh_example.incremental_model: [2020-01-01 - 2025-09-23]
â””â”€â”€ sqlmesh_example.seed_model: [full refresh]
Apply - Backfill Tables [y/n]: 
```

ãƒ†ã‚¹ãƒˆæˆåŠŸã—ãŸã‚ˆã€‚ãƒ¢ãƒ‡ãƒ«ï¼“ã¤è¶³ã—ãŸã‚ˆã€‚ãƒãƒƒã‚¯ãƒ•ã‚£ãƒ«ã™ã‚‹ï¼ˆè¶³ã‚‰ã‚“åˆ†åŸ‹ã‚ã¨ãï¼‰ï¼Ÿã¨è¨€ã£ã¦ã„ã‚‹ã®ã§ã€`y` ã—ã¾ã™ã€‚

```
Apply - Backfill Tables [y/n]: y
/home/ec2-user/work/sqlmesh-work/sqlmesh-example/.venv/lib/python3.13/site-packages/sqlmesh/core/model/definition.py:1684: UserWarning: The argument 'infer_datetime_format' is deprecated and will be removed in a future version. A strict version of it is now the default, see https://pandas.pydata.org/pdeps/0004-consistent-to-datetime-parsing.html. You can safely remove this argument.
  df[column] = pd.to_datetime(df[column], infer_datetime_format=True, errors="ignore")  # type: ignore 
/home/ec2-user/work/sqlmesh-work/sqlmesh-example/.venv/lib/python3.13/site-packages/sqlmesh/core/model/definition.py:1684: FutureWarning: errors='ignore' is deprecated and will raise in a future version. Use to_datetime without passing `errors` and catch exceptions explicitly instead
  df[column] = pd.to_datetime(df[column], infer_datetime_format=True, errors="ignore")  # type: ignore
[1/1] sqlmesh_example.seed_model          [insert seed file]                   0.04s
[1/1] sqlmesh_example.incremental_model   [insert 2020-01-01 - 2025-09-23]     0.02s
[1/1] sqlmesh_example.full_model          [full refresh, audits âœ”1]           0.04s
Executing model batches â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100.0% â€¢ 3/3 â€¢ 0:00:00

âœ” Model batches executed

Updating virtual layer  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100.0% â€¢ 3/3 â€¢ 0:00:00

âœ” Virtual layer updated

```

è£½å“ã‚µã‚¤ãƒˆã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨é•ã£ã¦ã€è­¦å‘ŠãŒå‡ºã¦ã¾ã™ãŒã€ãƒãƒƒã‚¯ãƒ•ã‚£ãƒ«ã§ããŸã‚ˆã†ã§ã™ã€‚ãƒ†ã‚­ã‚¹ãƒˆã®ã‚ˆã†ã« duckdb ã®ä¸­èº«ã‚‚è¦‹ã¦ãŠãã¾ã™ã€‚

```
$ duckdb db.db
v1.2.1 8e52ec4395
Enter ".help" for usage hints.
D select schema_name, table_name from duckdb_tables() where schema_name='sqlmesh__sqlmesh_example';
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       schema_name        â”‚                 table_name                  â”‚
â”‚         varchar          â”‚                   varchar                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ sqlmesh__sqlmesh_example â”‚ sqlmesh_example__full_model__3532441660     â”‚
â”‚ sqlmesh__sqlmesh_example â”‚ sqlmesh_example__incremental_model__2019538 â”‚
â”‚ sqlmesh__sqlmesh_example â”‚ sqlmesh_example__seed_model__3896887493     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
D select schema_name, view_name from duckdb_views() where schema_name='sqlmesh_example';
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   schema_name   â”‚     view_name     â”‚
â”‚     varchar     â”‚      varchar      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ sqlmesh_example â”‚ full_model        â”‚
â”‚ sqlmesh_example â”‚ incremental_model â”‚
â”‚ sqlmesh_example â”‚ seed_model        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

æœ¬ç•ªç’°å¢ƒã¯ã€ãƒ¢ãƒ‡ãƒ«ã«æŒ‡å®šã•ã‚ŒãŸã‚¹ã‚­ãƒ¼ãƒåã€ãƒ¢ãƒ‡ãƒ«åã®ãƒ“ãƒ¥ãƒ¼ã¨ã—ã¦ä½œã‚‰ã‚Œã€å®Ÿæ…‹ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¯ sqlmesh ç®¡ç†ã®ã‚¹ã‚­ãƒ¼ãƒã«ã‚ã‚‹æ„Ÿã˜ã§ã—ã‚‡ã†ã‹ã€‚

### ãƒ¢ãƒ‡ãƒ«æ›´æ–°

`models/incremental_model.sql` ã‚’ãƒ†ã‚­ã‚¹ãƒˆã®ã¨ãŠã‚Šå¤‰æ›´ã—ã¾ã™ã€‚

### é–‹ç™ºç’°å¢ƒä½œæˆ

```
$ uv run sqlmesh plan dev
.
======================================================================
Successfully Ran 1 tests against duckdb in 0.04 seconds.
----------------------------------------------------------------------

New environment `dev` will be created from `prod`


Differences from the `prod` environment:

Models:
â”œâ”€â”€ Directly Modified:
â”‚   â””â”€â”€ sqlmesh_example__dev.incremental_model
â””â”€â”€ Indirectly Modified:
    â””â”€â”€ sqlmesh_example__dev.full_model

Metadata Updated: sqlmesh_example__dev.full_model

---                                                                                   
                                                                                      
+++                                                                                   
                                                                                      
@@ -15,6 +15,7 @@                                                                     
                                                                                      
 SELECT                                                                               
   id,                                                                                
   item_id,                                                                           
+  'z' AS new_column,                                                                 
   event_date                                                                         
 FROM sqlmesh_example.seed_model                                                      
 WHERE                                                                                

Directly Modified: sqlmesh_example__dev.incremental_model (Non-breaking)
â””â”€â”€ Indirectly Modified Children:
    â””â”€â”€ sqlmesh_example__dev.full_model (Indirect Non-breaking)
Models needing backfill:
â””â”€â”€ sqlmesh_example__dev.incremental_model: [2020-01-01 - 2025-09-23]
Apply - Backfill Tables [y/n]: y
[1/1] sqlmesh_example__dev.incremental_model   [insert 2020-01-01 - 2025-09-23]       
0.02s   
Executing model batches â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100.0% â€¢ 1/1 â€¢ 0:00:00
                                                                                      
âœ” Model batches executed

Updating virtual layer  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100.0% â€¢ 2/2 â€¢ 0:00:00

âœ” Virtual layer updated

```

ãƒ¢ãƒ‡ãƒ«ã®å¤‰æ›´ã¨ãã®å†…å®¹ã€å½±éŸ¿ç¯„å›²ã‚’æ¤œçŸ¥ã—ã¦ã€ãƒãƒƒã‚¯ãƒ•ã‚£ãƒ«ã—ã¦ãã‚Œã¦ã„ã¾ã™ã€‚ä¸€å€‹å‰ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã‚‚æ°—ãŒä»˜ã„ã¦ã„ãŸã®ã§ã™ãŒã€ãƒ†ã‚­ã‚¹ãƒˆã¨é•ã£ã¦ `âœ” Physical layer updated` ã¯ã€å‡ºåŠ›ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

### é–‹ç™ºç’°å¢ƒã§æ›´æ–°ã‚’æ¤œè¨¼

ã“ã“ã‚‚ãƒ†ã‚­ã‚¹ãƒˆã®ã¨ãŠã‚Šã€å®Ÿæ–½ã—ã¦ãŠãã¾ã™ã€‚

```
$ uv run sqlmesh fetchdf "select * from sqlmesh_example__dev.incremental_model"
   id  item_id new_column event_date
0   1        2          z 2020-01-01
1   2        1          z 2020-01-01
2   3        3          z 2020-01-03
3   4        1          z 2020-01-04
4   5        1          z 2020-01-05
5   6        1          z 2020-01-06
6   7        1          z 2020-01-07

$ uv run sqlmesh fetchdf "select * from sqlmesh_example.incremental_model"
   id  item_id event_date
0   1        2 2020-01-01
1   2        1 2020-01-01
2   3        3 2020-01-03
3   4        1 2020-01-04
4   5        1 2020-01-05
5   6        1 2020-01-06
6   7        1 2020-01-07

```

ãƒ†ã‚­ã‚¹ãƒˆã§ã¯å®Ÿæ–½ã—ã¦ã„ã¾ã›ã‚“ãŒã€duckdb ã‚‚è¦‹ã¦ãŠãã¾ã™ã€‚

```
$ duckdb db.db
v1.2.1 8e52ec4395
Enter ".help" for usage hints.
D select schema_name, table_name from duckdb_tables() where schema_name='sqlmesh__sqlmesh_example';
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       schema_name        â”‚                  table_name                   â”‚
â”‚         varchar          â”‚                    varchar                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ sqlmesh__sqlmesh_example â”‚ sqlmesh_example__full_model__3532441660       â”‚
â”‚ sqlmesh__sqlmesh_example â”‚ sqlmesh_example__incremental_model__2019538   â”‚
â”‚ sqlmesh__sqlmesh_example â”‚ sqlmesh_example__incremental_model__639040956 â”‚
â”‚ sqlmesh__sqlmesh_example â”‚ sqlmesh_example__seed_model__3896887493       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
D select schema_name, view_name from duckdb_views() where schema_name='sqlmesh_example';
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   schema_name   â”‚     view_name     â”‚
â”‚     varchar     â”‚      varchar      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ sqlmesh_example â”‚ full_model        â”‚
â”‚ sqlmesh_example â”‚ incremental_model â”‚
â”‚ sqlmesh_example â”‚ seed_model        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
D select schema_name, view_name from duckdb_views() where schema_name='sqlmesh_example__dev';
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     schema_name      â”‚     view_name     â”‚
â”‚       varchar        â”‚      varchar      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ sqlmesh_example__dev â”‚ full_model        â”‚
â”‚ sqlmesh_example__dev â”‚ incremental_model â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ç‰©ç†ãƒ¬ã‚¤ãƒ¤ã«ã¯ã€ä»Šå›å¤‰æ›´ã—ãŸ `sqlmesh_example__incremental_model__639040956` ãŒè¿½åŠ ã•ã‚Œã€`select` ã§æ¤œè¨¼ã—ãŸã¨ãŠã‚Šã€`sqlmesh_example__dev` ã‚¹ã‚­ãƒ¼ãƒã« view ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã“ã§ã€`seed_model` ã¯ã€é–‹ç™ºç’°å¢ƒã«ã¯ã§ããªã„ã®ã ãªãã€‚ã¨ã„ã†æ°—ã¥ããŒã‚ã‚Šã¾ã—ãŸã€‚

### æœ¬ç•ªç’°å¢ƒã¸æ›´æ–°ã®é©ç”¨
ã¾ã€æƒ³å®šã©ãŠã‚Šã§ã™ã€‚

```
$ uv run sqlmesh plan
.
======================================================================
Successfully Ran 1 tests against duckdb in 0.04 seconds.
----------------------------------------------------------------------

Differences from the `prod` environment:

Models:
â”œâ”€â”€ Directly Modified:
â”‚   â””â”€â”€ sqlmesh_example.incremental_model
â””â”€â”€ Indirectly Modified:
    â””â”€â”€ sqlmesh_example.full_model

Metadata Updated: sqlmesh_example.full_model

---                                                                                   
                                                                                      
+++                                                                                   
                                                                                      
@@ -15,6 +15,7 @@                                                                     
                                                                                      
 SELECT                                                                               
   id,                                                                                
   item_id,                                                                           
+  'z' AS new_column,                                                                 
   event_date                                                                         
 FROM sqlmesh_example.seed_model                                                      
 WHERE                                                                                

Directly Modified: sqlmesh_example.incremental_model (Non-breaking)
â””â”€â”€ Indirectly Modified Children:
    â””â”€â”€ sqlmesh_example.full_model (Indirect Non-breaking)
Apply - Virtual Update [y/n]: y

SKIP: No physical layer updates to perform

SKIP: No model batches to execute

Updating virtual layer  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100.0% â€¢ 2/2 â€¢ 0:00:00

âœ” Virtual layer updated

```

### æœ¬ç•ªç’°å¢ƒã§ã®æ›´æ–°ã®æ¤œè¨¼
ã“ã¡ã‚‰ã‚‚æƒ³å®šã©ãŠã‚Š

```
$ uv run sqlmesh fetchdf "select * from sqlmesh_example.incremental_model"
   id  item_id new_column event_date
0   1        2          z 2020-01-01
1   2        1          z 2020-01-01
2   3        3          z 2020-01-03
3   4        1          z 2020-01-04
4   5        1          z 2020-01-05
5   6        1          z 2020-01-06
6   7        1          z 2020-01-07

```

ãƒ†ã‚­ã‚¹ãƒˆã«ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€å¿µã®ãŸã‚ duckdb ã‚‚è¦‹ã¦ãŠãã¾ã™ã€‚

```
$ duckdb db.db
v1.2.1 8e52ec4395
Enter ".help" for usage hints.
D select schema_name, table_name from duckdb_tables() where schema_name='sqlmesh__sqlmesh_example';
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       schema_name        â”‚                  table_name                   â”‚
â”‚         varchar          â”‚                    varchar                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ sqlmesh__sqlmesh_example â”‚ sqlmesh_example__full_model__3532441660       â”‚
â”‚ sqlmesh__sqlmesh_example â”‚ sqlmesh_example__incremental_model__2019538   â”‚
â”‚ sqlmesh__sqlmesh_example â”‚ sqlmesh_example__incremental_model__639040956 â”‚
â”‚ sqlmesh__sqlmesh_example â”‚ sqlmesh_example__seed_model__3896887493       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

`SKIP: No physical layer updates to perform` ã¨è¨€ã£ã¦ã¾ã—ãŸã‹ã‚‰ã­ã€‚æƒ³åƒã©ãŠã‚Šã€æœ€åˆã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¯æ¶ˆã—ã¦ãªã„ã§ã™ã€‚

[ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ](#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒã‚¸ãƒˆãƒª)ã¨[ãƒ—ãƒ©ãƒ³](#ãƒ—ãƒ©ãƒ³)ã¨[ç’°å¢ƒ](#ç’°å¢ƒ)ã«ã¤ã„ã¦ã¯ã€ãªã‚“ã¨ãªãã‚¤ãƒ¡ãƒ¼ã‚¸ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚

## SQLMesh CLI Crash Course
[ã“ã‚Œ](https://sqlmesh.readthedocs.io/en/stable/examples/sqlmesh_cli_crash_course/)ã§ã™ã€‚

### æº–å‚™
```bash
git clone https://github.com/sungchun12/sqlmesh-cli-crash-course.git
cd sqlmesh-cli-crash-course/
uv init
uv venv
uv add sqlmesh
```

ææ–™ã‚’ç¢ºèªã—ã¦ãŠãã¾ã™ã€‚

```
$ tree .
.
â”œâ”€â”€ README.md
â”œâ”€â”€ audits
â”‚   â””â”€â”€ assert_positive_order_ids.sql
â”œâ”€â”€ config.yaml
â”œâ”€â”€ macros
â”‚   â””â”€â”€ __init__.py
â”œâ”€â”€ main.py
â”œâ”€â”€ models
â”‚   â”œâ”€â”€ full_model.sql
â”‚   â”œâ”€â”€ incremental_by_partition.sql
â”‚   â”œâ”€â”€ incremental_by_unique_key.sql
â”‚   â”œâ”€â”€ incremental_model.sql
â”‚   â”œâ”€â”€ seed_model.sql
â”‚   â””â”€â”€ view_model.sql
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ seeds
â”‚   â””â”€â”€ seed_data.csv
â”œâ”€â”€ tests
â””â”€â”€ uv.lock
```

ãã—ã¦ã€README.md ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«åˆæœŸåŒ–ã—ã¾ã™ã€‚

```
$ uv run sqlmesh plan
[WARNING] Linter warnings for /home/ec2-user/work/sqlmesh-work/sqlmesh-cli-crash-course/models/seed_model.sql:
 - Line 1: nomissingaudits - Model `audits` must be configured to test data quality.
[WARNING] Linter warnings for /home/ec2-user/work/sqlmesh-work/sqlmesh-cli-crash-course/models/incremental_by_partition.sql:
 - Line 1: nomissingaudits - Model `audits` must be configured to test data quality.
[WARNING] Linter warnings for /home/ec2-user/work/sqlmesh-work/sqlmesh-cli-crash-course/models/incremental_by_unique_key.sql:
 - Line 1: nomissingaudits - Model `audits` must be configured to test data quality.
Initializing new project state...

`prod` environment will be initialized

Models:
â””â”€â”€ Added:
    â”œâ”€â”€ sqlmesh_example.full_model
    â”œâ”€â”€ sqlmesh_example.incremental_model
    â”œâ”€â”€ sqlmesh_example.incremental_unique_model
    â”œâ”€â”€ sqlmesh_example.seed_model
    â”œâ”€â”€ sqlmesh_example.view_model
    â””â”€â”€ sqlmesh_example_v3.incremental_partition_model
Models needing backfill:
â”œâ”€â”€ sqlmesh_example.full_model: [full refresh]
â”œâ”€â”€ sqlmesh_example.incremental_model: [2020-01-01 - 2025-09-23]
â”œâ”€â”€ sqlmesh_example.incremental_unique_model: [2020-01-01 - 2025-09-23]
â”œâ”€â”€ sqlmesh_example.seed_model: [full refresh]
â”œâ”€â”€ sqlmesh_example.view_model: [recreate view]
â””â”€â”€ sqlmesh_example_v3.incremental_partition_model: [2020-01-01 - 2025-09-23]
Apply - Backfill Tables [y/n]: y
/home/ec2-user/work/sqlmesh-work/sqlmesh-cli-crash-course/.venv/lib/python3.12/site-packages/sqlmesh/core/model/definition.py:1684: UserWarning: The argument 'infer_datetime_format' is deprecated and will be removed in a future version. A strict version of it is now the default, see https://pandas.pydata.org/pdeps/0004-consistent-to-datetime-parsing.html. 
You can safely remove this argument.
  df[column] = pd.to_datetime(df[column], infer_datetime_format=True, errors="ignore")  # type: ignore
/home/ec2-user/work/sqlmesh-work/sqlmesh-cli-crash-course/.venv/lib/python3.12/site-packages/sqlmesh/core/model/definition.py:1684: FutureWarning: errors='ignore' is deprecated and will raise in a future version. Use to_datetime without passing `errors` and catch exceptions explicitly instead
  df[column] = pd.to_datetime(df[column], infer_datetime_format=True, errors="ignore")  # type: ignore
[1/1] sqlmesh_example.seed_model                 [insert seed file]                0.04s   
[1/1] sqlmesh_example.incremental_unique_model   [insert/update rows]              0.03s   
[1/1] sqlmesh_example.incremental_model          [insert 2020-01-01 - 2025-09-23, audits âœ”2]   0.04s   

[WARNING] sqlmesh_example.full_model: 'assert_positive_order_ids' audit error: 2 rows failed. Learn more in logs: /home/ec2-user/work/sqlmesh-work/sqlmesh-cli-crash-course/logs/sqlmesh_2025_09_24_10_11_58.log

[1/1] sqlmesh_example.full_model                 [full refresh, audits âŒ1]       0.03s   

[WARNING] sqlmesh_example.view_model: 'assert_positive_order_ids' audit error: 2 rows failed. Learn more in logs: /home/ec2-user/work/sqlmesh-work/sqlmesh-cli-crash-course/logs/sqlmesh_2025_09_24_10_11_58.log

[1/1] sqlmesh_example.view_model                 [recreate view, audits âœ”2 âŒ1]   0.04s   
Executing model batches â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100.0% â€¢ 5/5 â€¢ 0:00:00                                
                                                                                                                       
âœ” Model batches executed

[1/1] sqlmesh_example_v3.incremental_partition_model   [insert partitions]        0.03s   
Executing model batches â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100.0% â€¢ 1/1 â€¢ 0:00:00                                
                                                                                                                       
âœ” Model batches executed

Updating virtual layer  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100.0% â€¢ 6/6 â€¢ 0:00:00

âœ” Virtual layer updated

```

ã‚ã€è­¦å‘Šã‚„ audit ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã¿ãŸã„ã§ã™ã­ã€‚ãƒ†ã‚­ã‚¹ãƒˆã«æ›¸ã„ã¦ã‚ã‚‹ã‚ˆã†ã«ã€ä½•ã‚‚å¤‰æ›´ã—ãªã„ã§ `sqlmesh plan dev` ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å±ã‚‰ã‚Œã¾ã™ã€‚

```
$ uv run sqlmesh plan dev
[WARNING] Linter warnings for 
/home/ec2-user/work/sqlmesh-work/sqlmesh-cli-crash-course/models/incremental_by_partition.sql:
 - Line 1: nomissingaudits - Model `audits` must be configured to test data quality.
[WARNING] Linter warnings for /home/ec2-user/work/sqlmesh-work/sqlmesh-cli-crash-course/models/seed_model.sql:
 - Line 1: nomissingaudits - Model `audits` must be configured to test data quality.
[WARNING] Linter warnings for 
/home/ec2-user/work/sqlmesh-work/sqlmesh-cli-crash-course/models/incremental_by_unique_key.sql:
 - Line 1: nomissingaudits - Model `audits` must be configured to test data quality.
Error: Creating a new environment requires a change, but project files match the `prod` environment. Make a change or use the --include-unmodified flag to create a new environment without changes.
```

### é–‹ç™ºç’°å¢ƒã§ã®å¤‰æ›´ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€é©ç”¨ã€ç›£æŸ»
ã“ã®ã‚µãƒ³ãƒ—ãƒ«ã®æœŸå¾…ã—ã¦ã„ã‚‹ä½¿ã„æ–¹ã¨ã¯é•ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ä¿®å¾©ã—ã¦ã¿ã¾ã™ã€‚

#### Linter warnings
ã¾ãšã¯ã€ï¼“ã¤ã® `[WARNING] Linter warnings` ã‹ã‚‰ã‚„ã‚Šã¾ã™ã€‚ãã‚‚ãã‚‚ã€ã“ã®ã‚µãƒ³ãƒ—ãƒ«ã‚‚åˆæœŸåŒ–æ™‚ã«ä½œã‚‰ã‚Œã‚‹ã‚‚ã®ã®å»¶é•·ã§ã™ã€‚ã‚‚ã¡ã‚ã‚“ã€åˆæœŸåŒ–æ™‚ã®ã‚µãƒ³ãƒ—ãƒ«ã§ã¯è­¦å‘Šã¯å‡ºåŠ›ã•ã‚Œãªã„ã®ã§ã€ãªã«ã‹ãŒå¤‰æ›´ã•ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™ã€‚

https://github.com/sungchun12/sqlmesh-cli-crash-course/blob/main/config.yaml

16è¡Œç›®ã® `warn_rules: ["noselectstar", "nomissingaudits"]` ãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚`nomissingaudits` ã¯ã€[ã“ã“]https://sqlmesh.readthedocs.io/en/stable/guides/linter/#built-in-rules)ã«èª¬æ˜ãŒã‚ã‚Šã¾ã—ãŸã€‚

> SQLMesh ã¯ã€ãƒ‡ãƒ¼ã‚¿å“è³ªã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã® audits ã‚’ãƒ¢ãƒ‡ãƒ«ã®æ§‹æˆå†…ã«è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã§ã—ãŸã€‚

ã¨ã„ã†ã“ã¨ãªã®ã§ã€ï¼“ã¤ã®ãƒ¢ãƒ‡ãƒ«ã«è¿½åŠ ã—ã¦ã¿ã¾ã™ã€‚ä»Šå›ã¯å¤‰æ›´ã‚ã‚Šãªã®ã§ã€`sqlmesh plan dev` ã—ã¾ã™ã€‚

```
$ uv run sqlmesh plan dev

New environment `dev` will be created from `prod`


Differences from the `prod` environment:

Models:
â””â”€â”€ Metadata Updated:
    â”œâ”€â”€ sqlmesh_example__dev.incremental_unique_model
    â”œâ”€â”€ sqlmesh_example__dev.seed_model
    â””â”€â”€ sqlmesh_example_v3__dev.incremental_partition_model

---                                                                                                            
                                                                                                               
+++                                                                                                            
                                                                                                               
@@ -10,6 +10,9 @@                                                                                              
                                                                                                               
     on_destructive_change 'ERROR',                                                                            
     on_additive_change 'ALLOW'                                                                                
   ),                                                                                                          
+  audits (NOT_NULL('columns' = (                                                                              
+      id                                                                                                      
+  ))),                                                                                                        
   grains ((id, event_date))                                                                                   
 )                                                                                                             
 SELECT                                                                                                        

Metadata Updated: sqlmesh_example__dev.incremental_unique_model

---                                                                                                            
                                                                                                               
+++                                                                                                            
                                                                                                               
@@ -11,5 +11,8 @@                                                                                              
                                                                                                               
     item_id INT,                                                                                              
     event_date DATE                                                                                           
   ),                                                                                                          
+  audits (NOT_NULL('columns' = (                                                                              
+      id                                                                                                      
+  ))),                                                                                                        
   grains ((id, event_date))                                                                                   
 )                                                                                                             

Metadata Updated: sqlmesh_example__dev.seed_model

---                                                                                                            
                                                                                                               
+++                                                                                                            
                                                                                                               
@@ -9,6 +9,9 @@                                                                                                
                                                                                                               
     on_additive_change 'ALLOW'                                                                                
   ),                                                                                                          
   partitioned_by "id",                                                                                        
+  audits (NOT_NULL('columns' = (                                                                              
+      id                                                                                                      
+  ))),                                                                                                        
   grains ((id, event_date))                                                                                   
 )                                                                                                             
 SELECT                                                                                                        

Metadata Updated: sqlmesh_example_v3__dev.incremental_partition_model
Apply - Virtual Update [y/n]: y

SKIP: No physical layer updates to perform

[1/1] sqlmesh_example__dev.incremental_unique_model         [insert/update rows, audits âœ”1]                    
0.01s   
[1/1] sqlmesh_example_v3__dev.incremental_partition_model   [insert partitions, audits âœ”1]                     
0.01s   
Auditing models â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100.0% â€¢ 2/2 â€¢ 0:00:00                                
                                                                                                               
âœ” Model batches executed

SKIP: No model batches to execute

Updating virtual layer  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100.0% â€¢ 6/6 â€¢ 0:00:00

âœ” Virtual layer updated

```

ï¼“ã‹æ‰€ã¨ã‚‚å¤‰æ›´ç®‡æ‰€ã‚‚è¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã­ã€‚å†’é ­ã®ï¼“ã‹æ‰€ã®è­¦å‘ŠãŒæ¶ˆãˆã¦ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ­ãƒ¼ã‚«ãƒ«ã®çŠ¶æ…‹ã‚’å¤‰æ›´ã—ãŸã®ã§ã‚¨ãƒ©ãƒ¼ã¨ãªã‚‰ãšå®Ÿè¡Œã•ã‚Œã¾ã—ãŸã€‚

### æœ¬ç•ªã¨ã®ãƒ‡ãƒ¼ã‚¿æ¯”è¼ƒ
ã©ã†ã‚‚ãƒ†ã‚­ã‚¹ãƒˆã¨ãƒªãƒã‚¸ãƒˆãƒªã®å†…å®¹ãŒãšã‚Œã¦ã„ã‚‹ã‚ˆã†ãªæ°—ãŒã—ã¾ã™ãŒã€ãƒ‡ãƒ¼ã‚¿æ¯”è¼ƒã‚’ã™ã‚‹ã¨ã„ã†ã“ã¨ãªã®ã§ã€ã‚„ã£ã¦ãŠãã¾ã™ã€‚

```
$ uv run sqlmesh table_diff prod:dev -m '*' --show-sample
No models contain differences with the selection criteria: '*'
```

ã¾ã€å‡ºåŠ›ã«å½±éŸ¿ã®ãªã„å¤‰æ›´ã—ã‹ã—ã¦ã¾ã›ã‚“ã‹ã‚‰ã€‚

### æœ¬ç•ªç’°å¢ƒã¸ã®å¤‰æ›´ã®é©ç”¨
> å¤‰æ›´å†…å®¹ã«å•é¡ŒãŒãªã‘ã‚Œã°ã€prod ã«é©ç”¨ã—ã¾ã™ã€‚

ã¨ã„ã†ã“ã¨ãªã®ã§ã€é©ç”¨ã—ã¾ã™ã€‚`dev` ã«é©ç”¨ã—ãŸéš›ã«ã€æœ¬ç•ªã¨ã®å·®åˆ†ãŒè¡¨ç¤ºã•ã‚Œã¦é©ç”¨ã—ã¾ã—ãŸãŒã€ä»Šåº¦ã¯ã€å‰å›ã®æœ¬ç•ªã¨ä»Šå›ã®æœ¬ç•ªã®å·®åˆ†ã«ãªã‚‹ã®ã§ã€åŒã˜å†…å®¹ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

```
$ uv run sqlmesh plan

Differences from the `prod` environment:

Models:
â””â”€â”€ Metadata Updated:
    â”œâ”€â”€ sqlmesh_example.incremental_unique_model
    â”œâ”€â”€ sqlmesh_example.seed_model
    â””â”€â”€ sqlmesh_example_v3.incremental_partition_model

---                                                                                                 
                                                                                                    
+++                                                                                                 
                                                                                                    
@@ -10,6 +10,9 @@                                                                                   
                                                                                                    
     on_destructive_change 'ERROR',                                                                 
     on_additive_change 'ALLOW'                                                                     
   ),                                                                                               
+  audits (NOT_NULL('columns' = (                                                                   
+      id                                                                                           
+  ))),                                                                                             
   grains ((id, event_date))                                                                        
 )                                                                                                  
 SELECT                                                                                             

Metadata Updated: sqlmesh_example.incremental_unique_model

---                                                                                                 
                                                                                                    
+++                                                                                                 
                                                                                                    
@@ -11,5 +11,8 @@                                                                                   
                                                                                                    
     item_id INT,                                                                                   
     event_date DATE                                                                                
   ),                                                                                               
+  audits (NOT_NULL('columns' = (                                                                   
+      id                                                                                           
+  ))),                                                                                             
   grains ((id, event_date))                                                                        
 )                                                                                                  

Metadata Updated: sqlmesh_example.seed_model

---                                                                                                 
                                                                                                    
+++                                                                                                 
                                                                                                    
@@ -9,6 +9,9 @@                                                                                     
                                                                                                    
     on_additive_change 'ALLOW'                                                                     
   ),                                                                                               
   partitioned_by "id",                                                                             
+  audits (NOT_NULL('columns' = (                                                                   
+      id                                                                                           
+  ))),                                                                                             
   grains ((id, event_date))                                                                        
 )                                                                                                  
 SELECT                                                                                             

Metadata Updated: sqlmesh_example_v3.incremental_partition_model
Apply - Virtual Update [y/n]: y

SKIP: No physical layer updates to perform

SKIP: No model batches to execute

Updating virtual layer  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100.0% â€¢ 6/6 â€¢ 0:00:00

âœ” Virtual layer updated

```

# ãŠã‚ã‚Šã«

SQLMesh ãªã‹ãªã‹è‰¯ã•ãã†ã§ã™ã€‚
ãŸã ã€ä¸Šè¨˜ã®ã¨ãŠã‚Šã€å…¬å¼ã‚µã‚¤ãƒˆã‚’å«ã‚ã¦ã€ã‚µãƒ³ãƒ—ãƒ«ã‚„ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ç”¨ã®æ•™æãŒå°‘ãªãã€ä½œè€…ã®æ„å›³ãŒã‚ã‹ã‚Šã«ãã„ã‚ˆã†ã«æ€ã„ã¾ã™ã€‚
æ—¥æœ¬èªã®æƒ…å ±ã‚‚ã»ã¨ã‚“ã©ãªã‹ã£ãŸã®ã§ã€ã“ã®è¨˜äº‹ãŒå°‘ã—ã§ã‚‚ãŠå½¹ã«ç«‹ã¦ã°å¹¸ã„ã§ã™ã€‚ï¼ˆã‚‚ã†å°‘ã—è§¦ã£ã¦ã¿ã‚ˆã†ã¨æ€ã†ã®ã§ã€ç¶šç·¨ã‚’æ›¸ãã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼‰

2025/9/3 ã«ä»¥ä¸‹ãŒç™ºè¡¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

https://www.fivetran.com/press/fivetran-acquires-tobiko-data-to-power-the-next-generation-of-advanced-ai-ready-data-transformation

ã“ã‚Œã‚’ãã£ã‹ã‘ã« SQLMesh ãŒ dbt ä¸€å¼·ã®çŠ¶æ…‹ã‚’å¤‰ãˆã¦ã„ãã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã­ã€‚
